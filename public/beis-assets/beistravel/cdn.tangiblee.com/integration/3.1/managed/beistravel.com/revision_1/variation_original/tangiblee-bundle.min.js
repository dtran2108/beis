!function(){try{window.TrackJS=window.trackJs=function(t,e,n){"use awesome";var i=function(t,e){this.config=t,this.onError=e,t.enabled&&this.watch()};i.prototype={watch:function(){g.forEach(["EventTarget","Node","XMLHttpRequest"],function(e){g.has(t,e+".prototype.addEventListener")&&g.hasOwn(t[e].prototype,"addEventListener")&&this.wrapEventTarget(t[e].prototype)},this),this.wrapTimer("setTimeout"),this.wrapTimer("setInterval")},wrap:function(t){function e(){try{return t.apply(this,arguments)}catch(e){throw n.onError("catch",e,{bindTime:a,bindStack:o}),g.wrapError(e)}}var n=this;try{if(!g.isFunction(t)||g.hasOwn(t,"__trackjs__"))return t;if(g.hasOwn(t,"__trackjs_state__"))return t.__trackjs_state__}catch(i){return t}var a,o;if(n.config.bindStack)try{throw Error()}catch(i){o=i.stack,a=g.isoNow()}for(var r in t)g.hasOwn(t,r)&&(e[r]=t[r]);return e.prototype=t.prototype,e.__trackjs__=!0,t.__trackjs_state__=e},wrapEventTarget:function(t){var e=this;g.has(t,"addEventListener.call")&&g.has(t,"removeEventListener.call")&&(g.patch(t,"addEventListener",function(t){return function(n,i,a,o){try{g.has(i,"handleEvent")&&(i.handleEvent=e.wrap(i.handleEvent))}catch(r){}return t.call(this,n,e.wrap(i),a,o)}}),g.patch(t,"removeEventListener",function(t){return function(e,n,i,a){try{n=n&&(n.__trackjs_state__||n)}catch(o){}return t.call(this,e,n,i,a)}}))},wrapTimer:function(e){var n=this;g.patch(t,e,function(t){return function(e,i){var a=Array.prototype.slice.call(arguments),o=a[0];return g.isFunction(o)&&(a[0]=n.wrap(o)),g.has(t,"apply")?t.apply(this,a):t(a[0],a[1])}})}};var a=function(t){this.initCurrent(t)};a.prototype={current:{},initOnly:{application:!0,cookie:!0,enabled:!0,token:!0,callback:{enabled:!0},console:{enabled:!0},navigation:{enabled:!0},network:{enabled:!0,fetch:!0},visitor:{enabled:!0},window:{enabled:!0,promise:!0}},defaults:{application:"",cookie:!1,dedupe:!0,dependencies:!0,enabled:!0,errorURL:"https://capture.trackjs.com/capture",errorNoSSLURL:"http://capture.trackjs.com/capture",faultURL:"https://usage.trackjs.com/fault.gif",onError:function(){return!0},serialize:function(t){function e(t){var e="<"+t.tagName.toLowerCase();t=t.attributes||[];for(var n=0;n<t.length;n++)e+=" "+t[n].name+'="'+t[n].value+'"';return e+">"}if(""===t)return"Empty String";if(t===n)return"undefined";if(g.isString(t)||g.isNumber(t)||g.isBoolean(t)||g.isFunction(t))return""+t;if(g.isElement(t))return e(t);if("symbol"==typeof t)return Symbol.prototype.toString.call(t);var i;try{i=JSON.stringify(t,function(t,i){return i===n?"undefined":g.isNumber(i)&&isNaN(i)?"NaN":g.isError(i)?{name:i.name,message:i.message,stack:i.stack}:g.isElement(i)?e(i):i})}catch(a){i="";for(var o in t)t.hasOwnProperty(o)&&(i+=',"'+o+'":"'+t[o]+'"');i=i?"{"+i.replace(",","")+"}":"Unserializable Object"}return i.replace(/"undefined"/g,"undefined").replace(/"NaN"/g,"NaN")},sessionId:"",token:"",userId:"",version:"",callback:{enabled:!0,bindStack:!1},console:{enabled:!0,display:!0,error:!0,warn:!1,watch:["log","debug","info","warn","error"]},navigation:{enabled:!0},network:{enabled:!0,error:!0,fetch:!0},visitor:{enabled:!0},usageURL:"https://usage.trackjs.com/usage.gif",window:{enabled:!0,promise:!0}},initCurrent:function(t){return this.validate(t,this.defaults,"config",{})?(this.current=g.defaultsDeep({},t,this.defaults),!0):(this.current=g.defaultsDeep({},this.defaults),console.log("init current config",this.current),!1)},setCurrent:function(t){return!!this.validate(t,this.defaults,"config",this.initOnly)&&(this.current=g.defaultsDeep({},t,this.current),!0)},validate:function(t,e,n,i){var a=!0;n=n||"",i=i||{};for(var o in t)if(t.hasOwnProperty(o))if(e.hasOwnProperty(o)){var r=typeof e[o];r!==typeof t[o]?(console.warn(n+"."+o+": property must be type "+r+"."),a=!1):"[object Array]"!==Object.prototype.toString.call(t[o])||this.validateArray(t[o],e[o],n+"."+o)?"[object Object]"===Object.prototype.toString.call(t[o])?a=this.validate(t[o],e[o],n+"."+o,i[o]):i.hasOwnProperty(o)&&(console.warn(n+"."+o+": property cannot be set after load."),a=!1):a=!1}else console.warn(n+"."+o+": property not supported."),a=!1;return a},validateArray:function(t,e,n){var i=!0;n=n||"";for(var a=0;a<t.length;a++)g.contains(e,t[a])||(console.warn(n+"["+a+"]: invalid value: "+t[a]+"."),i=!1);return i}};var o=function(t,e,n,i,a,o,r){this.util=t,this.log=e,this.onError=n,this.onFault=i,this.serialize=a,r.enabled&&(o.console=this.wrapConsoleObject(o.console,r))};o.prototype={wrapConsoleObject:function(t,e){t=t||{};var n,i=t.log||function(){},a=this;for(n=0;n<e.watch.length;n++)(function(n){var o=t[n]||i;t[n]=function(){try{var t=Array.prototype.slice.call(arguments);if(a.log.add("c",{timestamp:a.util.isoNow(),severity:n,message:a.serialize(1===t.length?t[0]:t)}),e[n])if(g.isError(t[0])&&1===t.length)a.onError("console",t[0]);else try{throw Error(a.serialize(1===t.length?t[0]:t))}catch(i){a.onError("console",i)}e.display&&(a.util.hasFunction(o,"apply")?o.apply(this,t):o(t[0]))}catch(i){a.onFault(i)}}})(e.watch[n]);return t},report:function(){return this.log.all("c")}};var r=function(t,e,n,i,a){this.config=t,this.util=e,this.log=n,this.window=i,this.document=a,this.correlationId=this.token=null,this.initialize()};r.prototype={initialize:function(){this.token=this.getCustomerToken(),this.correlationId=this.getCorrelationId()},getCustomerToken:function(){if(this.config.current.token)return this.config.current.token;var t=this.document.getElementsByTagName("script");return t[t.length-1].getAttribute("data-token")},getCorrelationId:function(){var t;if(!this.config.current.cookie)return this.util.uuid();try{t=this.document.cookie.replace(/(?:(?:^|.*;\s*)TrackJS\s*\=\s*([^;]*).*$)|^.*$/,"$1"),t||(t=this.util.uuid(),this.document.cookie="TrackJS="+t+"; expires=Fri, 31 Dec 9999 23:59:59 GMT; path=/")}catch(e){t=this.util.uuid()}return t},report:function(){return{application:this.config.current.application,correlationId:this.correlationId,sessionId:this.config.current.sessionId,token:this.token,userId:this.config.current.userId,version:this.config.current.version}}};var s=function(t){this.config=t,this.loadedOn=(new Date).getTime(),this.originalUrl=g.getLocation(),this.referrer=e.referrer};s.prototype={discoverDependencies:function(){var e={TrackJS:"3.7.2"};t.jQuery&&t.jQuery.fn&&t.jQuery.fn.jquery&&(e.jQuery=t.jQuery.fn.jquery),t.jQuery&&t.jQuery.ui&&t.jQuery.ui.version&&(e.jQueryUI=t.jQuery.ui.version),t.angular&&t.angular.version&&t.angular.version.full&&(e.angular=t.angular.version.full);for(var n in t)if("_trackJs"!==n&&"_trackJS"!==n&&"_trackjs"!==n&&"webkitStorageInfo"!==n&&"webkitIndexedDB"!==n&&"top"!==n&&"parent"!==n&&"frameElement"!==n)try{if(t[n]){var i=t[n].version||t[n].Version||t[n].VERSION;"string"==typeof i&&(e[n]=i)}}catch(a){}return e.TrackJS&&e.trackJs&&delete e.trackJs,e},report:function(){return{age:(new Date).getTime()-this.loadedOn,dependencies:this.config.current.dependencies?this.discoverDependencies():{trackJs:"3.7.2"},originalUrl:this.originalUrl,referrer:this.referrer,userAgent:t.navigator.userAgent,viewportHeight:t.document.documentElement.clientHeight,viewportWidth:t.document.documentElement.clientWidth}}};var c=function(t){this.util=t,this.appender=[],this.maxLength=30};c.prototype={all:function(t){var e,n,i=[];for(n=0;n<this.appender.length;n++)(e=this.appender[n])&&e.category===t&&i.push(e.value);return i},clear:function(){this.appender.length=0},truncate:function(){this.appender.length>this.maxLength&&(this.appender=this.appender.slice(Math.max(this.appender.length-this.maxLength,0)))},add:function(t,e){var n=this.util.uuid();return this.appender.push({key:n,category:t,value:e}),this.truncate(),n},get:function(t,e){var n,i;for(i=0;i<this.appender.length;i++)if(n=this.appender[i],n.category===t&&n.key===e)return n.value;return!1}};var l=function(t){var e={};return{addMetadata:function(t,n){e[t]=n},removeMetadata:function(t){delete e[t]},report:function(){var n,i=[];for(n in e)e.hasOwnProperty(n)&&i.push({key:n,value:t(e[n])});return i},store:e}},u=function(t,e){this.log=t,this.options=e,e.enabled&&this.watch()};u.prototype={isCompatible:function(e){return e=e||t,!g.has(e,"chrome.app.runtime")&&g.has(e,"addEventListener")&&g.has(e,"history.pushState")},record:function(t,e,n){this.log.add("h",{type:t,from:g.truncate(e,250),to:g.truncate(n,250),on:g.isoNow()})},report:function(){return this.log.all("h")},watch:function(){if(this.isCompatible()){var e=this,n=g.getLocationURL().relative;t.addEventListener("popstate",function(){var t=g.getLocationURL().relative;e.record("popState",n,t),n=t},!0),g.forEach(["pushState","replaceState"],function(t){g.patch(history,t,function(i){return function(){n=g.getLocationURL().relative;var a=i.apply(this,arguments),o=g.getLocationURL().relative;return e.record(t,n,o),n=o,a}})})}}};var d=function(t,e,n,i,a,o){this.util=t,this.log=e,this.onError=n,this.onFault=i,this.window=a,this.options=o,o.enabled&&this.initialize(a)};d.prototype={initialize:function(t){t.XMLHttpRequest&&this.util.hasFunction(t.XMLHttpRequest.prototype.open,"apply")&&this.watchNetworkObject(t.XMLHttpRequest),t.XDomainRequest&&this.util.hasFunction(t.XDomainRequest.prototype.open,"apply")&&this.watchNetworkObject(t.XDomainRequest),this.options.fetch&&g.isWrappableFunction(t.fetch)&&this.watchFetch()},watchFetch:function(){var e=this.log,n=this.options,i=this.onError;g.patch(t,"fetch",function(a){return function(o,r){var s;try{throw Error()}catch(c){s=c.stack}var l=o instanceof Request?o.url:o,u=o instanceof Request?o.method:(r||{}).method||"GET",d=a.apply(t,arguments);return d.__trackjs_state__=e.add("n",{type:"fetch",startedOn:g.isoNow(),method:u,url:g.truncate(l,2e3)}),d.then(function(t){var a=e.get("n",d.__trackjs_state__);if(a){g.defaults(a,{completedOn:g.isoNow(),statusCode:t.status,statusText:t.statusText});var o=t.headers.get("trackjs-correlation-id");o&&(a.requestCorrelationId=o),n.error&&400<=t.status&&(a=Error(a.statusCode+" "+a.statusText+": "+a.method+" "+a.url),a.stack=s,i("ajax",a))}return t})["catch"](function(t){t=t||{};var a=e.get("n",d.__trackjs_state__);throw a&&(g.defaults(a,{completedOn:g.isoNow(),statusCode:0,statusText:t.toString()}),n.error&&(t.message=t.message+": "+a.method+" "+a.url,t.stack=t.stack||s,i("ajax",t))),t})}})},watchNetworkObject:function(t){var e=this,n=t.prototype.open,i=t.prototype.send;return t.prototype.open=function(t,e){var i=(e||"").toString();return 0>i.indexOf("localhost:0")&&(this._trackJs={method:t,url:i}),n.apply(this,arguments)},t.prototype.send=function(){try{if(!this._trackJs)return i.apply(this,arguments);this._trackJs.logId=e.log.add("n",{type:"xhr",startedOn:e.util.isoNow(),method:this._trackJs.method,url:g.truncate(this._trackJs.url,2e3)}),e.listenForNetworkComplete(this)}catch(t){e.onFault(t)}return i.apply(this,arguments)},t},listenForNetworkComplete:function(t){var e=this;e.window.ProgressEvent&&t.addEventListener&&t.addEventListener("readystatechange",function(){4===t.readyState&&e.finalizeNetworkEvent(t)},!0),t.addEventListener?t.addEventListener("load",function(){e.finalizeNetworkEvent(t),e.checkNetworkFault(t)},!0):setTimeout(function(){try{var n=t.onload;t.onload=function(){e.finalizeNetworkEvent(t),e.checkNetworkFault(t),"function"==typeof n&&e.util.hasFunction(n,"apply")&&n.apply(t,arguments)};var i=t.onerror;t.onerror=function(){e.finalizeNetworkEvent(t),e.checkNetworkFault(t),"function"==typeof oldOnError&&i.apply(t,arguments)}}catch(a){e.onFault(a)}},0)},finalizeNetworkEvent:function(t){if(t._trackJs){var e=this.log.get("n",t._trackJs.logId);e&&(e.completedOn=this.util.isoNow(),t.getAllResponseHeaders&&t.getResponseHeader&&0<=(t.getAllResponseHeaders()||"").toLowerCase().indexOf("trackjs-correlation-id")&&(e.requestCorrelationId=t.getResponseHeader("trackjs-correlation-id")),e.statusCode=1223==t.status?204:t.status,e.statusText=1223==t.status?"No Content":t.statusText)}},checkNetworkFault:function(t){if(this.options.error&&400<=t.status&&1223!=t.status){var e=t._trackJs||{};this.onError("ajax",t.status+" "+t.statusText+": "+e.method+" "+e.url)}},report:function(){return this.log.all("n")}};var f=function(e,n){this.util=e,this.config=n,this.disabled=!1,this.throttleStats={attemptCount:0,throttledCount:0,lastAttempt:(new Date).getTime()},t.JSON&&t.JSON.stringify||(this.disabled=!0)};f.prototype={errorEndpoint:function(e){var n=this.config.current.errorURL;return this.util.testCrossdomainXhr()||-1!==t.location.protocol.indexOf("https")||(n=this.config.current.errorNoSSLURL),n+"?token="+e+"&v=3.7.2"},usageEndpoint:function(t){return this.appendObjectAsQuery(t,this.config.current.usageURL)},trackerFaultEndpoint:function(t){return this.appendObjectAsQuery(t,this.config.current.faultURL)},appendObjectAsQuery:function(t,e){e+="?";for(var n in t)t.hasOwnProperty(n)&&(e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n])+"&");return e},getCORSRequest:function(e,n){var i;return this.util.testCrossdomainXhr()?(i=new t.XMLHttpRequest,i.open(e,n),i.setRequestHeader("Content-Type","text/plain")):"undefined"!=typeof t.XDomainRequest?(i=new t.XDomainRequest,i.open(e,n)):i=null,i},sendTrackerFault:function(t){this.throttle(t)||(e.createElement("img").src=this.trackerFaultEndpoint(t))},sendUsage:function(t){e.createElement("img").src=this.usageEndpoint(t)},sendError:function(e,i){var a=this;if(!this.disabled&&!this.throttle(e))try{var o=this.getCORSRequest("POST",this.errorEndpoint(i));o.onreadystatechange=function(){4!==o.readyState||g.contains([200,202],o.status)||(a.disabled=!0)},o._trackJs=n,o.send(t.JSON.stringify(e))}catch(r){throw this.disabled=!0,r}},throttle:function(t){var e=(new Date).getTime();if(this.throttleStats.attemptCount++,this.throttleStats.lastAttempt+1e3>=e){if(this.throttleStats.lastAttempt=e,10<this.throttleStats.attemptCount)return this.throttleStats.throttledCount++,!0}else t.throttled=this.throttleStats.throttledCount,this.throttleStats.attemptCount=0,this.throttleStats.lastAttempt=e,this.throttleStats.throttledCount=0;return!1}};var g=function(){function i(t,e,o,r){return o=o||!1,r=r||0,g.forEach(e,function(e){g.forEach(g.keys(e),function(s){null===e[s]||e[s]===n?t[s]=e[s]:o&&10>r&&"[object Object]"===a(e[s])?(t[s]=t[s]||{},i(t[s],[e[s]],o,r+1)):t.hasOwnProperty(s)||(t[s]=e[s])})}),t}function a(t){return Object.prototype.toString.call(t)}return{addEventListenerSafe:function(t,e,n,i){t.addEventListener?t.addEventListener(e,n,i):t.attachEvent&&t.attachEvent("on"+e,n)},afterDocumentLoad:function(t){var n=!1;"complete"===e.readyState?g.defer(t):(g.addEventListenerSafe(e,"readystatechange",function(){"complete"!==e.readyState||n||(g.defer(t),n=!0)}),setTimeout(function(){n||(g.defer(t),n=!0)},1e4))},bind:function(t,e){return function(){return t.apply(e,Array.prototype.slice.call(arguments))}},contains:function(t,e){return 0<=t.indexOf(e)},defaults:function(t){return i(t,Array.prototype.slice.call(arguments,1),!1)},defaultsDeep:function(t){return i(t,Array.prototype.slice.call(arguments,1),!0)},defer:function(t,e){setTimeout(function(){t.apply(e)})},forEach:function(t,e,n){if(g.isArray(t)){if(t.forEach)return t.forEach(e,n);for(var i=0;i<t.length;)e.call(n,t[i],i,t),i++}},getLocation:function(){return t.location.toString().replace(/ /g,"%20")},getLocationURL:function(){return g.parseURL(g.getLocation())},has:function(t,e){try{for(var n=e.split("."),i=t,a=0;a<n.length;a++){if(!i[n[a]])return!1;i=i[n[a]]}return!0}catch(o){return!1}},hasFunction:function(t,e){try{return!!t[e]}catch(n){return!1}},hasOwn:function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},isArray:function(t){return"[object Array]"===a(t)},isBoolean:function(t){return"boolean"==typeof t||g.isObject(t)&&"[object Boolean]"===a(t)},isBrowserIE:function(e){e=e||t.navigator.userAgent;var n=e.match(/Trident\/([\d.]+)/);return n&&"7.0"===n[1]?11:!!(e=e.match(/MSIE ([\d.]+)/))&&parseInt(e[1],10)},isBrowserSupported:function(){var t=this.isBrowserIE();return!t||8<=t},isError:function(t){if(!g.isObject(t))return!1;var e=a(t);return"[object Error]"===e||"[object DOMException]"===e||g.isString(t.name)&&g.isString(t.message)},isElement:function(t){return g.isObject(t)&&1===t.nodeType},isFunction:function(t){return!(!t||"function"!=typeof t)},isNumber:function(t){return"number"==typeof t||g.isObject(t)&&"[object Number]"===a(t)},isObject:function(t){return!(!t||"object"!=typeof t)},isString:function(t){return"string"==typeof t||!g.isArray(t)&&g.isObject(t)&&"[object String]"===a(t)},isWrappableFunction:function(t){return this.isFunction(t)&&this.hasFunction(t,"apply")},isoNow:function(){var t=new Date;return t.toISOString?t.toISOString():t.getUTCFullYear()+"-"+this.pad(t.getUTCMonth()+1)+"-"+this.pad(t.getUTCDate())+"T"+this.pad(t.getUTCHours())+":"+this.pad(t.getUTCMinutes())+":"+this.pad(t.getUTCSeconds())+"."+String((t.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"},keys:function(t){if(!g.isObject(t))return[];var e,n=[];for(e in t)t.hasOwnProperty(e)&&n.push(e);return n},noop:function(){},pad:function(t){return t=String(t),1===t.length&&(t="0"+t),t},parseURL:function(t){var e=t.match(/^(([^:\/?#]+):)?(\/\/([^\/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);return e?(e={protocol:e[2],host:e[4],path:e[5],query:e[6],hash:e[8]},e.origin=(e.protocol||"")+"://"+(e.host||""),e.relative=(e.path||"")+(e.query||"")+(e.hash||""),e.href=t,e):{}},patch:function(t,e,n){t[e]=n(t[e]||g.noop)},testCrossdomainXhr:function(){return"withCredentials"in new XMLHttpRequest},truncate:function(t,e){if(t=""+t,t.length<=e)return t;var n=t.length-e;return t.substr(0,e)+"...{"+n+"}"},tryGet:function(t,e){try{return t[e]}catch(n){}},uuid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)})},wrapError:function(t){var e=t||Object.prototype.toString.call(t);if(e&&e.innerError)return t;var n=Error("TrackJS Caught: "+(e.message||e));return n.description="TrackJS Caught: "+e.description,n.file=e.file,n.line=e.line||e.lineNumber,n.column=e.column||e.columnNumber,n.stack=e.stack,n.innerError=t,n}}}(),p=function(t,e,n,i,a,o){this.util=t,this.log=e,this.onError=n,this.onFault=i,this.options=o,this.document=a,o.enabled&&this.initialize(a)};p.prototype={initialize:function(t){var e=this.util.bind(this.onDocumentClicked,this),n=this.util.bind(this.onInputChanged,this);t.addEventListener?(t.addEventListener("click",e,!0),t.addEventListener("blur",n,!0)):t.attachEvent&&(t.attachEvent("onclick",e),t.attachEvent("onfocusout",n))},onDocumentClicked:function(t){try{var e=this.getElementFromEvent(t);e&&e.tagName&&(this.isDescribedElement(e,"a")||this.isDescribedElement(e,"button")||this.isDescribedElement(e,"input",["button","submit"])?this.writeVisitorEvent(e,"click"):this.isDescribedElement(e,"input",["checkbox","radio"])&&this.writeVisitorEvent(e,"input",e.value,e.checked))}catch(n){this.onFault(n)}},onInputChanged:function(t){try{var e=this.getElementFromEvent(t);e&&e.tagName&&(this.isDescribedElement(e,"textarea")?this.writeVisitorEvent(e,"input",e.value):this.isDescribedElement(e,"select")&&e.options&&e.options.length?this.onSelectInputChanged(e):this.isDescribedElement(e,"input")&&!this.isDescribedElement(e,"input",["button","submit","hidden","checkbox","radio"])&&this.writeVisitorEvent(e,"input",e.value))}catch(n){this.onFault(n)}},onSelectInputChanged:function(t){if(t.multiple)for(var e=0;e<t.options.length;e++)t.options[e].selected&&this.writeVisitorEvent(t,"input",t.options[e].value);else 0<=t.selectedIndex&&t.options[t.selectedIndex]&&this.writeVisitorEvent(t,"input",t.options[t.selectedIndex].value)},writeVisitorEvent:function(t,e,i,a){"password"===this.getElementType(t)&&(i=n);var o=this.getElementAttributes(t);t.innerText&&(o.__trackjs_element_text=this.util.truncate(t.innerText,500)),this.log.add("v",{timestamp:this.util.isoNow(),action:e,element:{tag:t.tagName.toLowerCase(),attributes:o,value:this.getMetaValue(i,a)}})},getElementFromEvent:function(t){return t.target||e.elementFromPoint(t.clientX,t.clientY)},isDescribedElement:function(t,e,n){if(t.tagName.toLowerCase()!==e.toLowerCase())return!1;if(!n)return!0;for(t=this.getElementType(t),e=0;e<n.length;e++)if(n[e]===t)return!0;return!1},getElementType:function(t){return(t.getAttribute("type")||"").toLowerCase()},getElementAttributes:function(t){for(var e={},n=Math.min(t.attributes.length,10),i=0;i<n;i++){var a=t.attributes[i];g.contains(["data-value","value"],a.name.toLowerCase())||(e[a.name]=g.truncate(a.value,100))}return e},getMetaValue:function(t,e){return t===n?n:{length:t.length,pattern:this.matchInputPattern(t),checked:e}},matchInputPattern:function(t){return""===t?"empty":/^[a-z0-9!#$%&'*+=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/.test(t)?"email":/^(0?[1-9]|[12][0-9]|3[01])[\/\-](0?[1-9]|1[012])[\/\-]\d{4}$/.test(t)||/^(\d{4}[\/\-](0?[1-9]|1[012])[\/\-]0?[1-9]|[12][0-9]|3[01])$/.test(t)?"date":/^(?:(?:\+?1\s*(?:[.-]\s*)?)?(?:\(\s*([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9])\s*\)|([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9]))\s*(?:[.-]\s*)?)?([2-9]1[02-9]|[2-9][02-9]1|[2-9][02-9]{2})\s*(?:[.-]\s*)?([0-9]{4})(?:\s*(?:#|x\.?|ext\.?|extension)\s*(\d+))?$/.test(t)?"usphone":/^\s*$/.test(t)?"whitespace":/^\d*$/.test(t)?"numeric":/^[a-zA-Z]*$/.test(t)?"alpha":/^[a-zA-Z0-9]*$/.test(t)?"alphanumeric":"characters"},report:function(){return this.log.all("v")}};var h=function(t,e,n,i,a){this.onError=t,this.onFault=e,this.serialize=n,a.enabled&&this.watchWindowErrors(i),a.promise&&this.watchPromiseErrors(i)};h.prototype={watchPromiseErrors:function(t){var e=this;t.addEventListener?t.addEventListener("unhandledrejection",function(t){if(t=t||{},t=t.detail?g.tryGet(t.detail,"reason"):g.tryGet(t,"reason"),t!==n){if(!g.isError(t))try{throw Error(e.serialize(t))}catch(i){t=i}e.onError("promise",t)}}):t.onunhandledrejection=function(t){e.onError("promise",t)}},watchWindowErrors:function(t){var e=this;g.patch(t,"onerror",function(t){return function(n,i,a,o,r){try{r=r||{},r.message=r.message||e.serialize(n),r.name=r.name||"Error",r.line=r.line||parseInt(a,10)||null,r.column=r.column||parseInt(o,10)||null,"[object Event]"!==Object.prototype.toString.call(n)||i?r.file=r.file||e.serialize(i):r.file=(n.target||{}).src,e.onError("window",r)}catch(s){e.onFault(s)}t.apply(this,arguments)}})}};var m=function(){this.hasInstalled=!1,this.hasEnabled=!0,this.window=t,this.document=e,this.util=g,this.install=g.bind(this.install,this),this.onError=g.bind(this.onError,this),this.onFault=g.bind(this.onFault,this),this.serialize=g.bind(this.serialize,this),this.log=new c(g),this.metadata=new l(this.serialize);var n=t&&(t._trackJs||t._trackJS||t._trackjs);n&&this.install(n)};return m.prototype={install:function(t){try{if("undefined"==typeof e)return this.warn("monitoring disabled in node"),!1;if(!g.has(t,"token"))return this.warn("missing token"),!1;if(this.hasInstalled)return this.warn("already installed"),!1;if(this.config=new a(t),this.transmitter=new f(this.util,this.config),this.environment=new s(this.config),this.customer=new r(this.config,this.util,this.log,this.window,this.document),!this.config.current.enabled)return this.hasEnabled=!1;if(this.windowConsoleWatcher=new o(this.util,this.log,this.onError,this.onFault,this.serialize,this.window,this.config.current.console),!this.util.isBrowserSupported())return!1;this.callbackWatcher=new i(this.config.current.callback,this.onError,this.onFault),this.visitorWatcher=new p(this.util,this.log,this.onError,this.onFault,this.document,this.config.current.visitor),this.navigationWatcher=new u(this.log,this.config.current.navigation),this.networkWatcher=new d(this.util,this.log,this.onError,this.onFault,this.window,this.config.current.network),this.windowWatcher=new h(this.onError,this.onFault,this.serialize,this.window,this.config.current.window);var n=this;return g.afterDocumentLoad(function(){n.transmitter.sendUsage({token:n.customer.token,correlationId:n.customer.correlationId,application:n.config.current.application,x:n.util.uuid()})}),this.hasInstalled=!0}catch(c){return this.onFault(c),!1}},pub:function(){var t=this,e={addMetadata:this.metadata.addMetadata,attempt:function(e,n){try{var i=Array.prototype.slice.call(arguments,2);return e.apply(n||this,i)}catch(a){throw t.onError("catch",a),g.wrapError(a)}},configure:function(e){return!t.hasInstalled&&t.hasEnabled?(t.warn("agent must be installed"),!1):t.config.setCurrent(e)},hash:"cf5522da9dcedb7390522470840acc128504902d",isInstalled:function(){return t.hasInstalled},install:this.install,removeMetadata:this.metadata.removeMetadata,track:function(e){if(!t.hasInstalled&&t.hasEnabled)t.warn("agent must be installed");else{var n=g.isError(e)?e.message:t.serialize(e);if(e=e||{},!e.stack)try{throw Error(n)}catch(i){e=i}t.onError("direct",e)}},version:"3.7.2",watch:function(e,n){return function(){try{var i=Array.prototype.slice.call(arguments,0);return e.apply(n||this,i)}catch(a){throw t.onError("catch",a),g.wrapError(a)}}},watchAll:function(t){var e,n=Array.prototype.slice.call(arguments,1);for(e in t)"function"!=typeof t[e]||g.contains(n,e)||(t[e]=this.watch(t[e],t));return t}};return new o(g,t.log,t.onError,t.onFault,t.serialize,e,a.prototype.defaults.console),e},onError:function(){var e,n=!1;return function(i,a,o){if(this.hasInstalled&&this.hasEnabled&&g.isBrowserSupported())try{if(o=o||{bindStack:null,bindTime:null,force:!1},a&&g.isError(a)||(a={name:"Error",message:this.serialize(a,o.force)}),-1===a.message.indexOf("TrackJS Caught"))if(n&&-1!==a.message.indexOf("Script error"))n=!1;else{var r=g.defaultsDeep({},{agentPlatform:"browser",bindStack:o.bindStack,bindTime:o.bindTime,column:a.column||a.columnNumber,console:this.windowConsoleWatcher.report(),customer:this.customer.report(),entry:i,environment:this.environment.report(),file:a.file||a.fileName,line:a.line||a.lineNumber,message:a.message,metadata:this.metadata.report(),nav:this.navigationWatcher.report(),network:this.networkWatcher.report(),url:(t.location||"").toString(),stack:a.stack,timestamp:this.util.isoNow(),visitor:this.visitorWatcher.report(),version:"3.7.2"});if(!o.force)try{if(!this.config.current.onError(r,a))return}catch(s){r.console.push({timestamp:this.util.isoNow(),severity:"error",message:s.message});var c=this;setTimeout(function(){c.onError("catch",s,{force:!0})},0)}if(this.config.current.dedupe){var l=(r.message+r.stack).substr(0,1e4);if(l===e)return;e=l}!function(){function t(){var t=0;return g.forEach(r.console,function(e){t+=(e.message||"").length}),8e4<=t}for(var e=0;t()&&e<r.console.length;)r.console[e].message=g.truncate(r.console[e].message,1e3),e++}(),this.log.clear(),setTimeout(function(){n=!1}),n=!0,this.transmitter.sendError(r,this.customer.token)}}catch(s){this.onFault(s)}}}(),onFault:function(t){var e=this.transmitter||new f;t=t||{},t={token:this.customer.token,file:t.file||t.fileName,msg:t.message||"unknown",stack:(t.stack||"unknown").substr(0,1e3),url:this.window.location,v:"3.7.2",h:"cf5522da9dcedb7390522470840acc128504902d",x:this.util.uuid()},e.sendTrackerFault(t)},serialize:function(t,e){if(this.hasInstalled&&this.config.current.serialize&&!e)try{return this.config.current.serialize(t)}catch(n){this.onError("catch",n,{force:!0})}return a.prototype.defaults.serialize(t)},warn:function(e){g.has(t,"console.warn")&&t.console.warn("TrackJS: "+e)}},(new m).pub()}("undefined"==typeof window?void 0:window,"undefined"==typeof document?void 0:document),window.tangibleeAnalytics=window.tangibleeAnalytics||function(){(window.tangibleeAnalytics.q=window.tangibleeAnalytics.q||[]).push(arguments)};var t={domain:"",activeLocale:document.documentElement.lang,useCookies:!0,doNotTrack:!1,container:".tangiblee-modal-iframe-container",sideView:null,widgetVersion:"v3",showCTA:function(t,e){},hideCTA:function(){},SKUs:[],activeSKU:"",activePrice:"",activeSalePrice:"",activeCurrency:"",activeATC:"",onCTAShown:function(){},onCtaClicked:function(){},onModalOpened:function(){},onIframeLoaded:function(){},onUserInteracted:function(){},onModalClosed:!1,onKeepAlive:!1,onATCClickInWidget:function(){},onWidgedRendered:function(){},onIframeSrcChange:function(){},onCameraModeChange:function(){},onSKUsValidated:function(){},iframe:{},modal:{},updateSKU:{},utils:{},validateSKUs:{},setCtaClickHandler:function(){var e,n=document.getElementsByClassName(t.ctaCssClass);if(!n.length)return!1;for(var i=!1,a=function(e){return!i&&(t.onCtaClicked(e),void(i=setTimeout(function(){"onCTAClick"===t.loadIframe&&(t.iframe.exists()?t.iframe.update():t.iframe.inject()),t.modal.show(t.modal.isUsed()),clearTimeout(i),i=!1},50)))},o=0;o<n.length;o++)e=n[o],t.utils.bindClickAndTouch(e,a,t.preventDefaultOnCtaClick,t.stopPropagationOnCtaClick,!0)},ctaCssClass:"tangiblee-cta",validSKUs:[],useMultiVariations:!1,variationSKUs:[],isVisibleProduct:!0,features:[],isARAvailable:!1,LockValidation:!1,QMEnabled:!1,product:{},products:[],thumbs:[],getFaceDiameter:!1,getFaceDiameterDimensions:!1,loadIframe:"onCTAClick",logOn:!1,translations:[],preventDefaultOnCtaClick:!0,stopPropagationOnCtaClick:!0,useClickEventInsteadMousedown:!1,availableModes:[],categoryThumbsDefault:{},customIframeSrcAttributes:[],getThumb:function(e){var n=t.thumbs[e||t.product.id],i=n&&n.indexOf("tangiblee-thumb")>-1;return i?t.categoryThumbsDefault[t.product.category]||t.categoryThumbsDefault["default"]||n:n},shouldForceWidgetOpen:function(){var e="1"===t.utils.getParam("tangiblee-opened")||"true"===t.utils.getParam("tangiblee-opened");return e},onForceWidgetOpen:function(t){this.shouldForceWidgetOpen()&&t&&tangiblee("setCustomIframeSrcAttributes",[{key:"forceArOpen",value:"1"}])},onForceWidgetClose:function(t){this.shouldForceWidgetOpen()&&t&&tangiblee("setCustomIframeSrcAttributes",[{key:"forceArOpen",value:"0"}])},trackJSInstalled:!1};!function(){t.promise="undefined"==typeof Promise?function(){"use strict";function t(t,e){f.add(t,e),d||(d=p(f.drain))}function e(t){var e,n=typeof t;return null==t||"object"!=n&&"function"!=n||(e=t.then),"function"==typeof e&&e}function n(){for(var t=0;t<this.chain.length;t++)i(this,1===this.state?this.chain[t].success:this.chain[t].failure,this.chain[t]);this.chain.length=0}function i(t,n,i){var a,o;try{n===!1?i.reject(t.msg):(a=n===!0?t.msg:n.call(void 0,t.msg),a===i.promise?i.reject(TypeError("Promise-chain cycle")):(o=e(a))?o.call(a,i.resolve,i.reject):i.resolve(a))}catch(r){i.reject(r)}}function a(i){var r,c=this;if(!c.triggered){c.triggered=!0,c.def&&(c=c.def);try{(r=e(i))?t(function(){var t=new s(c);try{r.call(i,function(){a.apply(t,arguments)},function(){o.apply(t,arguments)})}catch(e){o.call(t,e)}}):(c.msg=i,c.state=1,c.chain.length>0&&t(n,c))}catch(l){o.call(new s(c),l)}}}function o(e){var i=this;i.triggered||(i.triggered=!0,i.def&&(i=i.def),i.msg=e,i.state=2,i.chain.length>0&&t(n,i))}function r(t,e,n,i){for(var a=0;a<e.length;a++)!function(a){t.resolve(e[a]).then(function(t){n(a,t)},i)}(a)}function s(t){this.def=t,this.triggered=!1}function c(t){this.promise=t,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function l(e){if("function"!=typeof e)throw TypeError("Not a function");if(0!==this.__NPO__)throw TypeError("Not a promise");this.__NPO__=1;var i=new c(this);this.then=function(e,a){var o={success:"function"!=typeof e||e,failure:"function"==typeof a&&a};return o.promise=new this.constructor(function(t,e){if("function"!=typeof t||"function"!=typeof e)throw TypeError("Not a function");o.resolve=t,o.reject=e}),i.chain.push(o),0!==i.state&&t(n,i),o.promise},this["catch"]=function(t){return this.then(void 0,t)};try{e.call(void 0,function(t){a.call(i,t)},function(t){o.call(i,t)})}catch(r){o.call(i,r)}}var u,d,f,g=Object.prototype.toString,p="undefined"!=typeof setImmediate?function(t){return setImmediate(t)}:setTimeout;try{Object.defineProperty({},"x",{}),u=function(t,e,n,i){return Object.defineProperty(t,e,{value:n,writable:!0,configurable:i!==!1})}}catch(h){u=function(t,e,n){return t[e]=n,t}}f=function(){function t(t,e){
this.fn=t,this.self=e,this.next=void 0}var e,n,i;return{add:function(a,o){i=new t(a,o),n?n.next=i:e=i,n=i,i=void 0},drain:function(){var t=e;for(e=n=d=void 0;t;)t.fn.call(t.self),t=t.next}}}();var m=u({},"constructor",l,!1);return l.prototype=m,u(m,"__NPO__",0,!1),u(l,"resolve",function(t){var e=this;return t&&"object"==typeof t&&1===t.__NPO__?t:new e(function(e,n){if("function"!=typeof e||"function"!=typeof n)throw TypeError("Not a function");e(t)})}),u(l,"reject",function(t){return new this(function(e,n){if("function"!=typeof e||"function"!=typeof n)throw TypeError("Not a function");n(t)})}),u(l,"all",function(t){var e=this;return"[object Array]"!=g.call(t)?e.reject(TypeError("Not an array")):0===t.length?e.resolve([]):new e(function(n,i){if("function"!=typeof n||"function"!=typeof i)throw TypeError("Not a function");var a=t.length,o=Array(a),s=0;r(e,t,function(t,e){o[t]=e,++s===a&&n(o)},i)})}),u(l,"race",function(t){var e=this;return"[object Array]"!=g.call(t)?e.reject(TypeError("Not an array")):new e(function(n,i){if("function"!=typeof n||"function"!=typeof i)throw TypeError("Not a function");r(e,t,function(t,e){n(e)},i)})}),l}():Promise}();var e=function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)||navigator.userAgent.match(/Mac/)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2};t.utils.isItiOS=e()&&!window.MSStream,t.utils.isItMobileOrTablet=function(){var t=navigator.userAgent;return t.match(/Android/i)||t.match(/BlackBerry/i)||t.match(/Opera Mini/i)||t.match(/IEMobile/i)||e()},t.utils.fireEvent=function(t,e){if(!t)return!1;var n;if(t.ownerDocument)n=t.ownerDocument;else{if(9!==t.nodeType)throw new Error("Invalid node passed to fireEvent: "+t.id);n=t}if(t.dispatchEvent){var i="";switch(e){case"click":case"mousedown":case"mouseup":i="MouseEvents";break;case"focus":case"change":case"blur":case"select":i="HTMLEvents";break;default:throw"fireEvent: Couldn't find an event class for event '"+e+"'."}var a=n.createEvent(i);a.initEvent(e,!0,!0),a.synthetic=!0,t.dispatchEvent(a,!0)}},t.utils.bindClickAndTouch=function(e,n,i,a,o){function r(t){var i=e.getAttribute("data-last-event-handled");if(!i||"touch"===i){var a=g-d,o=p-f;Math.abs(a)<u&&Math.abs(o)<u&&n(t),e.setAttribute("data-last-event-handled","touch"),setTimeout(function(){e.setAttribute("data-last-event-handled","")},50)}}if(!e||e.getAttribute("data-click-and-touch-bound"))return!1;if(t.useClickEventInsteadMousedown)e.addEventListener("click",function(t){i&&t.preventDefault(),a&&t.stopPropagation();var r=e.getAttribute("data-last-event-handled");r&&"click"!==r&&"keydown"!==r||(o?n(t,!0):n(t),e.setAttribute("data-last-event-handled","click"))});else{var s,c=50;e.addEventListener("mousedown",function(t){s=t.clientX}),e.addEventListener("mouseup",function(t){var r=t.clientX;i&&t.preventDefault(),a&&t.stopPropagation();var l=e.getAttribute("data-last-event-handled");if(!l||"click"===l||"keydown"===l){var u=!0;t.button&&0!==t.button&&(u=!1),u&&Math.abs(r-s)<c&&(o?n(t,!0):n(t),e.setAttribute("data-last-event-handled","click"),setTimeout(function(){e.setAttribute("data-last-event-handled","")},50))}})}var l=window.innerWidth||document.body.clientWidth,u=Math.max(1,Math.floor(.01*l)),d=0,f=0,g=0,p=0;e.addEventListener("touchstart",function(t){d=t.changedTouches[0].screenX,f=t.changedTouches[0].screenY}),e.addEventListener("touchend",function(t){i&&t.cancelable&&t.preventDefault(),a&&t.stopPropagation(),g=t.changedTouches[0].screenX,p=t.changedTouches[0].screenY,r(t)}),o&&e.addEventListener("keydown",function(t){var o=t.code||t.key;"Enter"!==o&&"Space"!==o||(i&&t.preventDefault(),a&&t.stopPropagation(),n(t,!0),e.setAttribute("data-last-event-handled","keydown"),setTimeout(function(){e.setAttribute("data-last-event-handled","")},50))}),e.setAttribute("data-click-and-touch-bound","true")},t.utils.http={fetch:function(e,n,i){return new t.promise(function(t,a){try{var o=new XMLHttpRequest;o.open(n,e,!0),o.setRequestHeader("X-Requested-With","XMLHttpRequest"),o.setRequestHeader("Content-Type","application/json");var r=function(){o.readyState>3&&o.status>=200&&o.status<400&&t(o.responseText.length&&JSON.parse(o.responseText))};o.onreadystatechange=r,o.onerror=function(){a(o.statusText)},o.send(i),o.onreadystatechange!==r&&(o.onreadystatechange=r)}catch(s){a()}})},jsonp:function(e){return new t.promise(function(t,n){try{window.tangibleeCallbackRegistry={};var i=function(t,e,n){function i(){a||(delete tangibleeCallbackRegistry[o],n(t))}var a=!1,o="cb"+String(Math.random()).slice(-6);t+=~t.indexOf("?")?"&":"?",t+="callback=tangibleeCallbackRegistry."+o,tangibleeCallbackRegistry[o]=function(t){a=!0,delete tangibleeCallbackRegistry[o],e(t)};var r=document.createElement("script");r.onreadystatechange=function(){"complete"!==this.readyState&&"loaded"!==this.readyState||(this.onreadystatechange=null,setTimeout(i,0))},r.onload=i,r.onerror=i,r.src=t,document.head.appendChild(r)},a=function(e){t(e)};i(e,a,r)}catch(o){var r=function(t){n("error request: "+t)}}})}},t.utils.isElementVisible=function(t){return t&&(null!==t.offsetParent||"fixed"===window.getComputedStyle(t).position)},t.utils.log=function(e){t.logOn&&console.log(e)},t.utils.createCustomEvent=function(t,e){if("function"==typeof window.CustomEvent)var n=new CustomEvent(t,{detail:e});else{var n=document.createEvent("CustomEvent");n.initCustomEvent(t,!0,!0,e)}document.dispatchEvent(n)},t.utils.waitForConditionToMet=function(t,e){e=e||500;var n,i=0,a=function(){};return{then:function(o){return function r(){t()?(o(),"undefined"!=typeof n&&clearTimeout(n)):i++>e?(a(),"undefined"!=typeof n&&clearTimeout(n)):n=setTimeout(r,100)}(),{fail:function(t){a=t}}}}},t.utils.formatNumberWithCommas=function(t){var e,n,i=function(t){var e=/.*\d+.*/g;return e.test(t)};if(i(t))try{t=t.replace(/,/g,""),e=parseFloat(t).toFixed(2);var a=e.toString().split(".");a[0]=a[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),n=a.join(".")}catch(o){}return n},t.utils.ready=function(t){"loading"!=document.readyState?t():document.addEventListener("DOMContentLoaded",t)},t.utils.getParam=function(t){var e=function(){for(var t,e,n,i={},a=window.location.search.substring(1).split("&"),o=0;o<a.length;o++)t=a[o],e=t.split("="),n={key:e[0],value:e[1]},n.key&&(i[n.key]=n.value||"");return i},n=e();return!!n[t]&&decodeURI(n[t])},t.utils.getCookie=function(t){var e,n,i=t+"=",a=document.cookie.split(";");for(e=0;e<a.length;e++){for(n=a[e];" "===n.charAt(0);)n=n.substring(1);if(0===n.indexOf(i))return n.substring(i.length,n.length)}return""},t.utils.setCookie=function(t,e,n){var i=new Date;i.setTime(i.getTime()+24*(n||365)*60*60*1e3);var a="expires="+i.toUTCString();document.cookie=t+"="+e+";"+a+";path=/; Secure;"},t.utils.hasClickedTargetSpecificClassName=function(t,e,n){if(t&&t.target&&e){n&&"string"==typeof n&&n.length||(n="body");for(var i,a=t.target,o=document.querySelector(n),r=document.querySelector("body");a&&!(i=a.classList.contains(e)?a:null)&&(a=a.parentNode,!a.isEqualNode(o)&&!a.isEqualNode(r)););return i}};var n=function(t){var e=/OS (\d+_\d+)/;if(e.test(t))return parseFloat(e.exec(t)[1].replace("_","."));var n=13;return n};t.utils.browserNotSupportAR=function(){const e=t.utils.isItiOS&&/Version\/[\d.]+.*Safari/i.test(window.navigator.userAgent),i=t.utils.isItiOS&&n(window.navigator.userAgent)>=14.3;return t.utils.isItiOS&&!i&&!e};var i=function(){return(navigator.userAgent.indexOf("Opera")||navigator.userAgent.indexOf("OPR"))!==-1?"opera":navigator.userAgent.indexOf("Chrome")!==-1?"chrome":navigator.userAgent.indexOf("Safari")!==-1?"safari":navigator.userAgent.indexOf("Firefox")!==-1?"firefox":navigator.userAgent.indexOf("MSIE")!==-1||!!document.documentMode==!0?"ie":null},a=function(e){return!e||(!(!t.utils.isItMobileOrTablet()||!e.mobile)||!(t.utils.isItMobileOrTablet()||!e.desktop))},o=function(t){if(!t)return!0;var e=i();return!e||(!(e in t)||(t[e]||!1))};t.utils.validateFeatureFlag=function(t,e){if(t in e){var n=e[t];if(null===n)return!0;try{var i=JSON.parse(n);return!!a(i.device)&&(!!o(i.browser)&&(i.data||!0))}catch(r){return!1}}return!1},t.validateSKUs=function(){if(t.SKUs.then)return t.SKUs.then(function(e){return t.validateSKUs(e)});if(t.SKUs.length&&t.SKUs[0]&&"string"==typeof t.SKUs[0]){var e="https://api.tangiblee.com/api/tngimpr?ids="+t.SKUs.join()+"&domain="+t.domain+"&activeLocale="+t.activeLocale;return t.utils.http.fetch(e,"GET")}return new t.promise(function(t,e){e({message:"Not correct SKUs format in _tangiblee.validateSKUs method"})})},t.validateAny=function(){if(t.SKUs.then)return t.SKUs.then(function(e){return t.validateAny(e)});if(t.SKUs.length&&t.SKUs[0]&&"string"==typeof t.SKUs[0]){var e="https://api.tangiblee.com/api/productvalidateany?ids="+t.SKUs.join()+"&domain="+t.domain;return t.utils.http.fetch(e,"GET")}return new t.promise(function(t,e){e({message:"Not correct SKUs format in _tangiblee.validateAny method"})})},t.updateSku=function(){if(t.validSKUs.length){var e=t.product?t.product.id:null;if(t.product=t.products[t.activeSKU],e===t.activeSKU)return;if(t.validSKUs.indexOf(t.activeSKU)>-1){var n=t.showCTA(t.activeSKU,t.getThumb());n&&n.then?n.then(function(e){t.ctaCssClass=e,t.setCtaClickHandler()}):(t.ctaCssClass=n,t.setCtaClickHandler()),window.tangibleeAnalytics("trackImpression",[t.activeSKU]),window.tangibleeAnalytics("trackFlow","impression"),t.isARAvailable&&window.tangibleeAnalytics("trackCustomEvent",{action:"Client Impression AR",label:t.activeSKU,value:1,isInteraction:!1}),t.iframe.exists()&&t.iframe.update()}else t.hideCTA(t.activeSKU),t.modal.close(t.modal.isUsed())}},function(){var e=function(){var e=function(){var e=function(){var e=window.screen.width,n=window.screen.height,i=window.devicePixelRatio;if(window.innerHeight>window.innerWidth&&t.utils.isItiOS&&i>=2){if(375===e&&667===n)return 547;if(414===e&&736===n)return 618;if(375===e&&812===n)return 629;if(414===e&&896===n)return 714;if(390===e&&844===n)return 658;if(320===e&&568===n)return 448;if(428===e&&926===n)return 740;if(768===e&&1024===n)return 950}return!1};return"v2"===t.widgetVersion?Math.round(.92*window.innerHeight):e()!==!1?e():null!==t.sideView?window.innerHeight:window.innerHeight-10},n=function(){var e;return e=window.innerWidth<1024&&t.utils.isItiOS||null!==t.sideView?window.innerWidth:window.innerWidth-10,"v2"===t.widgetVersion&&(e=window.innerWidth-10),e},i=document.getElementsByClassName("tangiblee-modal-content")[0];i.style.width=n()+"px",i.style.height=e()+"px",null!==t.sideView&&(i.style.width="100%")},n=function(){var e=document.getElementsByClassName("tangiblee-modal-content")[0];if("v2"===t.widgetVersion)return e.style.width="800px",void(e.style.height="610px");if(null!==t.sideView)return e.style.width="100%",e.style.maxWidth="600px",void(e.style.height="100%");var n=t.utils.isItMobileOrTablet(),i=n?768:980,a=n?900:610;e.style.width=Math.min(window.innerWidth-120,i)+"px",e.style.height=Math.min(window.innerHeight-120,a)+"px"},i=function(){var e=document.getElementsByClassName("tangiblee-modal-content")[0],n=document.createElement("a"),i=document.createElement("div");n.id="tng-btn-close-modal",n.href="javascript:void(0)",n.rel="modal:tng-close",n.className="tng-close-modal",n.title="Close Tangiblee Popup",n.style.position=i.style.position="absolute",n.style.display="block",n.style.zIndex="2",n.style.cursor="pointer",n.setAttribute("tabindex","-1"),"v2"===t.widgetVersion?(n.style.backgroundImage="url(//cdn.tangiblee.com/tangiblee-static/shared/lib/jquery.modal/tng_close@2x.png)",n.style.backgroundSize="18px 18px",n.style.backgroundPosition="center center",n.style.backgroundColor="#f9f9f9",n.style.backgroundRepeat="no-repeat",n.style.top=i.style.top="5px",n.style.right=i.style.right="5px",n.style.width=i.style.width="32px",n.style.height=i.style.height="32px"):(n.style.backgroundImage="url(https://cdn.tangiblee.com/tangiblee-static-img/close-mobile.svg)",n.style.backgroundSize="18px 18px",n.style.backgroundColor="rgba(0,0,0,0.05)",n.style.backgroundPosition="8px 8px",n.style.backgroundRepeat="no-repeat",n.style.top=i.style.top="0",n.style.right=i.style.right="0",n.style.width=i.style.width="40px",n.style.height=i.style.height="35px",null!==t.sideView&&(n.style.right=i.style.right="0px",n.style.top=i.style.top="0px")),i.id="tng-btn-close-modal__focusable",i.setAttribute("role","button"),i.setAttribute("tabindex","0"),e.appendChild(i),e.appendChild(n)},a=function(){var e=document.getElementsByClassName("tangiblee-modal-content")[0],n=document.createElement("a"),i=document.createElement("div");n.id="tng-btn-close-modal",n.href="javascript:void(0)",n.rel="modal:tng-close",n.className="tng-close-modal",n.title="Close Tangiblee Popup",n.style.backgroundImage="url(https://cdn.tangiblee.com/tangiblee-static-img/close-x.svg)",n.style.backgroundSize="26px 28px",n.style.backgroundRepeat="no-repeat",n.style.position=i.style.position="absolute",n.style.top=i.style.top="0px",n.style.right=i.style.right="-42px",n.style.display=i.style.display="block",n.style.width=i.style.width="26px",n.style.height=i.style.height="28px",n.style.zIndex="2",n.setAttribute("tabindex","-1"),i.id="tng-btn-close-modal__focusable",i.setAttribute("role","button"),i.setAttribute("tabindex","0"),i.setAttribute("aria-label","Close Tangiblee modal"),null!==t.sideView&&(n.style.right=i.style.right="5px",n.style.top=i.style.top="5px"),e.appendChild(i),e.appendChild(n)},o=function(){return t.product.poweredbylink||"https://www.tangiblee.com"},r=function(){var e=document.createElement("div"),n=document.createElement("a");e.style.backgroundSize="contain",e.style.backgroundRepeat="no-repeat",e.style.width=n.style.width="155px",e.style.height=n.style.height="35px",n.id="tng-logo__focusable",n.style.position="absolute",n.style.top="0",n.style.left="0",n.style.zIndex="-1",n.setAttribute("role","button"),n.setAttribute("tabindex","0"),n.setAttribute("rel","nofollow");var i=document.createElement("a");i.id="tng-logo-wrapper",i.href=n.href=o(),i.rel=n.rel="nofollow noopener",i.target=n.target="_blank",i.style.display="flex",i.style.alignItems="center",i.style.width="155px",i.style.position="relative",i.setAttribute("tabindex","-1"),i.setAttribute("rel","nofollow"),null!==t.sideView&&(i.style.position="absolute",i.style.left="0px",i.style.top="0px"),"v2"===t.widgetVersion?(e.style.backgroundImage='url("//cdn.tangiblee.com/tangiblee-static-img/powered-by-full-logo-horizontal.svg")',i.style.position="absolute",i.style.bottom="12px",i.style.left="2px",i.style.zIndex="10"):e.style.backgroundImage='url("//cdn.tangiblee.com/tangiblee-static-img/powered-by-full-logo-horizontal-inverted.svg")',i.appendChild(n),i.appendChild(e),document.getElementsByClassName("tangiblee-modal-content")[0].appendChild(i)},s=function(){if("v3"===t.widgetVersion){var e=document.createElement("a"),n=document.createElement("a");e.style.backgroundImage='url("//cdn.tangiblee.com/tangiblee-static-img/powered-by-full-logo-horizontal-inverted.svg")',e.style.backgroundSize="contain",e.style.backgroundRepeat="no-repeat",e.style.backgroundPosition="center",e.style.display="inline-block",e.rel=n.rel="nofollow noopener",e.href=n.href=o(),e.target=n.target="_blank",e.style.width=n.style.width="150px",e.style.height=n.style.height="35px",e.id="tng-logo-link",e.setAttribute("tabindex","-1"),n.setAttribute("rel","nofollow"),n.id="tng-logo__focusable",n.style.position="absolute",n.style.top="0",n.style.left="50%",n.style.transform="translateX(-50%)",n.style.zIndex="-1",n.setAttribute("tabindex","0"),n.setAttribute("role","button"),n.setAttribute("rel","nofollow");var i=document.createElement("div");i.id="tng-logo-wrapper",i.style.display="flex",i.style.alignItems="center",i.style.justifyContent="center",i.style.position="relative",null!==t.sideView&&(i.style.position="absolute",i.style.top="0",i.style.right="0",i.style.width="100%",i.style.justifyContent="flex-start"),i.appendChild(n),i.appendChild(e);var a=document.getElementsByClassName("tangiblee-modal-iframe-container")[0];document.getElementsByClassName("tangiblee-modal-content")[0].insertBefore(i,a)}},c=function(){if("v3"===t.widgetVersion){var e=document.getElementsByClassName("tangiblee-modal-content")[0],n=document.createElement("a");n.id="tng-first-focusable-el",n.href="javascript:void(0)",n.rel="nofollow",n.style.position="absolute",n.style.top=0,n.style.left=0,n.setAttribute("aria-hidden",!0),n.onfocusin=function(){var t=document.getElementById("tng-btn-close-modal");t&&t.focus()};var i=e&&e.children[0];e.insertBefore(n,i)}},l=function(){if("v3"===t.widgetVersion){var e=document.getElementsByClassName("tangiblee-modal-content")[0],n=document.createElement("a");n.id="tng-last-focusable-el",n.href="javascript:void(0)",n.rel="nofollow",n.style.position="absolute",n.style.top=0,n.style.right=0,n.setAttribute("aria-hidden",!0),n.onfocusin=function(){var t=document.getElementById("tangiblee_iframe");t&&t.focus()},e.appendChild(n)}},u=function(){document.getElementById("tng-btn-close-modal")&&document.getElementById("tng-btn-close-modal").remove(),document.getElementById("tng-btn-close-modal__focusable")&&document.getElementById("tng-btn-close-modal__focusable").remove(),document.getElementById("tng-logo-wrapper")&&document.getElementById("tng-logo-wrapper").remove(),document.getElementById("tng-logo__focusable")&&document.getElementById("tng-logo__focusable").remove(),document.getElementById("tng-first-focusable-el")&&document.getElementById("tng-first-focusable-el").remove(),document.getElementById("tng-last-focusable-el")&&document.getElementById("tng-last-focusable-el").remove(),document.getElementsByClassName("tangiblee-atc")[0]&&document.getElementsByClassName("tangiblee-atc")[0].remove()},d=function(o){var u=document.getElementsByClassName("tangiblee-modal-content")[0];if(u){window.innerWidth<=768?(e(),c(),s(),i(),l(),u.style.position="absolute",t.utils.isItiOS?(u.style.top="0px",u.style.left="0px"):(u.style.top="5px",u.style.left="5px"),"v2"===t.widgetVersion&&(u.style.top="5px",u.style.left="5px"),null!==t.sideView&&(u.style.top="0",u.style.right=o?"-100%":"0",u.style.left="")):(n(),c(),r(),a(),l(),null!==t.sideView?(u.style.position="absolute",u.style.top="0",u.style.right=o?"-100%":"0"):(u.style.position="relative",u.style.top="0",u.style.left="0"));var d=document.getElementById("tng-logo-wrapper");t.utils.bindClickAndTouch(d,function(){},!1,!0,!1);var f=document.getElementById("tng-btn-close-modal");t.utils.bindClickAndTouch(f,t.modal.close,!0,!0,!1);var g=document.getElementById("tng-logo__focusable");t.utils.bindClickAndTouch(g,function(){},!1,!0,!0);var p=document.getElementById("tng-btn-close-modal__focusable");t.utils.bindClickAndTouch(p,t.modal.close,!0,!0,!0)}},f=function(){var e=navigator.userAgent.match(/iPhone/i);if(e){var n=!1;window.addEventListener("orientationchange",function(){n||(n=setTimeout(function(){t.validSKUs.indexOf(t.activeSKU)>-1&&(u(),d(),t.showCTA(t.activeSKU,t.getThumb()),clearTimeout(n),n=!1)},250))})}else{var i=!1;window.addEventListener("resize",function(){i||(i=setTimeout(function(){t.validSKUs.indexOf(t.activeSKU)>-1&&(u(),d(),t.showCTA(t.activeSKU,t.getThumb()),clearTimeout(i),i=!1)},250))})}},g=function(){d(!0),f()},p=function(){return"v2"===t.widgetVersion?window.innerWidth<=768?"position: absolute; top: 5px; left: 5px; background:#fff;width:100%;height:100%;":"position: relative; background:#fff;width:100%;height:100%;":null!==t.sideView?"position: absolute; top: 0px; right: -100%; width:100%; height:calc(100% - 35px);":window.innerWidth<=768?"position: absolute; top: 5px; left: 5px;width:100%;height:calc(100% - 35px);":"position: relative;width:100%;height:calc(100% - 35px);"},h=function(){var e;return e="v2"===t.widgetVersion?"display: flex!important; justify-content: center; align-items: center; position: fixed; top: 0px; left: 0px; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.7); z-index: 2147483647; touch-action: none; transform: translate(-100%,-100%) translateZ(0); will-change: transform;":null!==t.sideView?"position: fixed; top: 0px; left: 0px; width: 100%; height: 100%; overflow: hidden; background-color: rgba(0, 0, 0, 0.7); z-index: 2147483647; touch-action: none; transform: translate(-100%,-100%) translateZ(0); will-change: transform;":"display: flex!important; justify-content: center; align-items: center; position: fixed; top: 0px; left: 0px; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.7); z-index: 2147483647; touch-action: none; transform: translate(-100%,-100%) translateZ(0); will-change: transform;"};t.modal.isUsed=function(){return".tangiblee-modal-iframe-container"===t.container},t.modal.inject=function(){var e,n=p(),i=h();"v2"===t.widgetVersion&&(e='<div class="tangiblee-modal-overlay tng-disable-scrolling" style="'+i+'"><div class="tangiblee-modal-content" style="'+n+'"><div class="tangiblee-modal-iframe-container" style="width:100%;height:calc(100%);"></div></div></div>'),e=null!==t.sideView?'<div class="tangiblee-modal-overlay tng-disable-scrolling" style="'+i+'"><div class="tangiblee-modal-content" style="'+n+'"><div class="tangiblee-head" style="position: absolute;top: 0;left: 0;width: 100%; height: 38px; background: rgba(0,0,0,0.9);"></div><div class="tangiblee-modal-iframe-container" style="width:100%;height:100%;padding-top:38px; box-sizing: border-box;"></div></div></div>':'<div class="tangiblee-modal-overlay tng-disable-scrolling" style="'+i+'"><div class="tangiblee-modal-content" style="'+n+'">'+(t.utils.isItiOS&&window.innerWidth<=768?'<div class="tangiblee-modal-bg" style="background:white;position:absolute;top:35px;left:5px;width:calc(100% - 10px);z-index: -1;height:calc(100% - 35px);"></div>':"")+'<div class="tangiblee-modal-iframe-container" style="width:100%;height:calc(100% - 35px);"></div></div></div>',document.head.insertAdjacentHTML("beforeend","<style>#tng-logo-wrapper:focus, #tng-btn-close-modal:focus {outline: none; box-shadow: none;} #tng-logo__focusable:focus, #tng-btn-close-modal__focusable:focus {outline: 2px solid #65d594;}"+(t.utils.isItiOS&&768===window.innerWidth?"@media (max-width: 770px) and (min-width: 767px) and (orientation: portrait) {.tangiblee-modal-content{height: calc(100% - 10px) !important;}}":"")+"</style>"),document.body.insertAdjacentHTML("beforeend",e);var a=document.getElementsByClassName("tangiblee-modal-overlay")[0];a&&(setTimeout(function(){t.utils.bindClickAndTouch(a,function(e){e.target===a&&t.modal.close(t.modal.isUsed())},!0,!0)},1e3),a.onkeydown=function(e){27==e.keyCode&&t.modal.close(t.modal.isUsed(),!0)},g())},t.openedProducts=[],t.isCurrentArRingMode=!1;var m=function(e){t.modal.close(t.modal.isUsed(),!1,!0)};t.modal.show=function(e){var n=document.getElementsByClassName("tangiblee-modal-overlay")[0],i=document.querySelector(".tangiblee-modal-content");if(n||!t.modal.isUsed()){if(e)n.style.transform="translate(0,0) translateZ(0)";else if(n)n.style.transform="translate(0,0) translateZ(0)",n.style.display="block";else{var a=document.querySelector(t.container);a&&(a.style.display="block")}if(i&&null!==t.sideView&&(i.style.transition="0.5s",setTimeout(function(){i.style.right="0px",history.pushState(null,"Tangiblee Virtual Try-On")},0),window.removeEventListener("popstate",m,!1),window.addEventListener("popstate",m,!1)),n&&n.setAttribute("is-showing",!0),t.utils.isItMobileOrTablet()&&window.scrollY){var o=window.scrollY;window.scrollTo(0,-1),setTimeout(function(){window.scrollTo(0,o)},50)}window.tangibleeAnalytics("getTangibleeUserId",function(e){t.iframe.messaging.postMessageToIframe('{"type":"widgetopened", "data":"'+e+'"}')});var r=t.isCurrentArRingMode?t.activeSKU+"_ar":t.activeSKU;t.openedProducts.indexOf(r)==-1&&(window.tangibleeAnalytics("trackWidgetOpen"),window.tangibleeAnalytics("trackFlow","open"),t.openedProducts.push(r)),t.iframe.focusOnLoad(),t.onModalOpened(),(t.onModalClosed||t.onKeepAlive)&&(t.timeInWidget=0,t.keepAliveIntervalId=setInterval(function(){t.onKeepAlive&&t.onKeepAlive(),t.timeInWidget+=5},5e3))}};var v=function(){var e;if("v3"===t.widgetVersion&&(e=document.getElementById("tng-a11y-focusable-el"),!e)){var n=document.createElement("a");n.id="tng-a11y-focusable-el",n.href="javascript:void(0)",n.rel="nofollow",n.style.position="absolute",n.style.top=0,n.style.right=0,n.setAttribute("aria-hidden",!0);var i=document.getElementsByTagName("div")[0];i&&i.children&&i.children[0]&&(i.insertBefore(n,i.children[0]),e=document.getElementById("tng-a11y-focusable-el"))}return e};t.modal.close=function(e,n,i){var a=document.getElementsByClassName("tangiblee-modal-overlay")[0],o=document.getElementsByClassName("tangiblee-modal-content")[0];if(a||!t.modal.isUsed()){if(e)if(a)a.style.transform="translate(-100%,-100%) translateZ(0)";else{var r=document.querySelector(t.container);r&&(r.style.display="none")}else a.style.display="none";if(o&&null!==t.sideView&&(o.style.right="-100%",o.style.transition="",window.removeEventListener("popstate",m,!1),!i&&a&&"true"===a.getAttribute("is-showing")&&history.back()),a&&a.setAttribute("is-showing",!1),window.tangibleeAnalytics("trackWidgetClose"),t.keepAliveIntervalId&&clearInterval(t.keepAliveIntervalId),t.onModalClosed&&t.onModalClosed(t.timeInWidget),t.onForceWidgetClose&&t.onForceWidgetClose(t.isARAvailable),t.iframe.messaging.postMessageToIframe('{"type":"widgetclosed"}'),n){var s=document.querySelector("."+t.ctaCssClass);if(s&&("button"===s.tagName.toLowerCase()||"a"===s.tagName.toLowerCase()||s.hasAttribute("tabindex")))s.focus();else{var c=v();c&&c.focus()}}}}}(),function(){var e=function(){if(t.activeATC)if("string"==typeof t.activeATC){var e=document.querySelectorAll(t.activeATC);n(e)}else Node.prototype.isPrototypeOf(t.activeATC)?t.utils.isElementVisible(t.activeATC)&&t.utils.fireEvent(t.activeATC,"click"):(HTMLCollection.prototype.isPrototypeOf(t.activeATC)||NodeList.prototype.isPrototypeOf(t.activeATC))&&n(t.activeATC)},n=function(e){for(var n,i=0;i<e.length;i++)if(n=e[i],t.utils.isElementVisible(n)){t.utils.fireEvent(n,"click");break}},i=[{type:"widgetready",listener:function(){window.tangibleeAnalytics("getTangibleeUserId",function(e){t.iframe.messaging.postMessageToIframe('{"type":"user","data":"'+e+'"}')})}},{type:"widget_rendered",listener:function(){t.onWidgedRendered()}},{type:"add_to_cart",listener:function(){t.activeATC&&(t.modal.close(t.modal.isUsed()),e()),window.tangibleeAnalytics("trackATCWidgetClick"),window.tangibleeAnalytics("trackFlow","atc"),t.isARAvailable&&window.tangibleeAnalytics("trackCustomEvent",{action:"ATC Widget AR",label:t.activeSKU,value:1,isInteraction:!1}),t.onATCClickInWidget()}},{type:"tng_popup_close",listener:function(e){t.modal.close(t.modal.isUsed(),e)}},{type:"tng_flow_step",listener:function(t){window.tangibleeAnalytics("trackFlow",t)}},{type:"tng_ar_camera",listener:function(e){t.onCameraModeChange(e)}}],a=function(t){if(t&&t.data&&"string"==typeof t.data){var e={};try{e=JSON.parse(t.data)}catch(n){}for(var a=0;a<i.length;a++)if(e.type==i[a].type){var o=e.isKeyboardEvent||e.step||e.active||void 0;i[a].listener(o)}}},o=function(e){var n;return n="v2"===t.widgetVersion?'<iframe scrolling="no" style="position:relative;z-index:1;width:100%;height:100%;border:none;" src="'+e+'" class="tangiblee-iframe" id="tangiblee_iframe"></iframe>':null!==t.sideView?'<iframe scrolling="no" style="background:white;position:relative;z-index:1;width:100%;height:100%;border:none;box-sizing:border-box;" src="'+e+'" class="tangiblee-iframe" id="tangiblee_iframe" allow="camera"></iframe>':window.innerWidth<1024&&t.utils.isItiOS?'<iframe scrolling="no" style="padding:0 5px;position:relative;z-index:1;width:100%;height:100%;border:none;box-sizing:border-box;" src="'+e+'" class="tangiblee-iframe" id="tangiblee_iframe" allow="camera"></iframe>':'<iframe scrolling="no" style="background:white;position:relative;z-index:1;width:100%;height:100%;border:none;" src="'+e+'" class="tangiblee-iframe" id="tangiblee_iframe" allow="camera"></iframe>'};t.iframe.onLoadIsSet=!1,t.iframe.getIframeSrc=function(){var e;if("v2"===t.widgetVersion)e=window.innerWidth<=808?"//widget.tangiblee.com/mobile/"+t.product.id+"?domain="+t.domain:"//widget.tangiblee.com/desktop/"+t.product.id+"?domain="+t.domain;else{var n=t.product&&t.product.id,i=[n];if(t.variationSKUs.forEach(function(t){i.indexOf(t)===-1&&i.push(t)}),e="//cdn.tangiblee.com/widget/index.html?id="+(t.useMultiVariations?i.join(","):t.product.id)+"&domain="+t.domain,e+="&useCookies="+t.useCookies,t.activePrice&&(e+="&price="+t.activePrice),t.activeSalePrice&&t.activePrice&&(e+="&discount="+t.activeSalePrice),t.activeCurrency&&(e+="&currency="+t.activeCurrency),t.getFaceDiameter&&t.getFaceDiameter()&&(e+="&faceDiameter="+t.getFaceDiameter()),t.getFaceDiameter&&t.getFaceDiameter()&&t.getFaceDiameterDimensions()&&(e+="&faceDiameterDimensions="+t.getFaceDiameterDimensions()),t.doNotTrack&&(e+="&doNotTrack="+t.doNotTrack),t.availableModes.length>0){var a=t.availableModes.join(",");e+="&modes="+a}if(t.version&&(e+="&version="+t.version),t.QMEnabled){var o=!!window.sessionStorage&&!!sessionStorage.getItem("QuantumMetricSessionID")&&sessionStorage.getItem("QuantumMetricSessionID"),r=!!window.localStorage&&!!localStorage.getItem("QuantumMetricUserID")&&localStorage.getItem("QuantumMetricUserID");e+="&qmenable=1",e+="&qmsid="+o.toString(),e+="&qmuid="+r.toString()}t.customIframeSrcAttributes.forEach(function(t){e+="&"+t.key+"="+t.value})}return e},t.iframe.inject=function(){t.modal.isUsed()&&t.modal.inject();var e=document.querySelector(t.container);if(e){var n=t.iframe.getIframeSrc(),i=o(n);e.innerHTML=i}},t.iframe.update=function(){var e=document.getElementById("tangiblee_iframe");if(e){var n=e.getAttribute("src").replace(/(^\w+:|^)/,""),i=t.iframe.getIframeSrc();n!=i&&(e.src=i,t.onIframeSrcChange())}},t.iframe.exists=function(){return document.getElementById("tangiblee_iframe")},t.iframe.switchWidgetVariation=function(e){var n=JSON.stringify(e);t.iframe.messaging.postMessageToIframe('{"type":"variationchanged","data":'+n+"}")},t.iframe.focusOnLoad=function(){var e=document.getElementById("tangiblee_iframe");t.iframe.onLoadIsSet?e.focus():e.onload=function(){t.onIframeLoaded(),t.isUserInteractedBefore||(e.addEventListener("click",t.onUserInteracted),t.isUserInteractedBefore=!0),setTimeout(function(){e.focus(),t.iframe.onLoadIsSet=!0},200)}},t.iframe.messaging={addMessageListener:function(t){i.push(t)},startListening:function(){!window.initialTangiblee&&window.addEventListener("message",a,!1),window.initialTangiblee=!0},postMessageToIframe:function(t){var e=document.getElementById("tangiblee_iframe");if(e){var n=e.contentWindow;n&&"function"==typeof n.postMessage&&n.postMessage(t,"*")}}}}(),function(){window.tangiblee_instance=window.tangiblee_instance||0,window.tangiblee_instance>0||(window.tangiblee_instance+=1,window.tangiblee=window.tangiblee||function(){(tangiblee.q=tangiblee.q||[]).push(arguments)},tangiblee("require",["utils"],function(e){var n="//cdn.tangiblee.com/integration/3.1/managed/beistravel.com/revision_1/variation_original/";!function(){var t='.tangiblee-cta{ display: flex;align-items: center;height:36px;background: white;border-radius: 36px;font-size: 11px;font-family: "Brandon Grotesque Bold";font-weight: 700;padding: 5px 11px 5px 20px;border: none;box-shadow: 0 3px 6px 0 rgb(0, 0, 0, .16);}.tangiblee-cta span {height: 1.1em;padding: 0 5px;}.tangiblee-cta img {display:block;margin-right:5px; width:18px;}.tangiblee-wrapper--mobile{position: absolute;bottom: calc(5% + 20px);z-index: 20;left: 16px;}.tangiblee-wrapper--desktop {margin: 10px 0 20px;}.tangiblee-wrapper--desktop .tangiblee-cta{font-size:13px;} @media(max-width:330px){.tangiblee-wrapper--mobile .tangiblee-cta{font-size:10px; padding: 5px 10px 5px 10px; height:30px;}}',e=document.createElement("style");e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t)),document.getElementsByTagName("head")[0].appendChild(e)}();var i=function(){var t=/\bAndroid(?:.+)Mobile\b/i.test(window.navigator.userAgent),e=/iPhone/i.test(window.navigator.userAgent);
return e||t},a=function(){var t=ShopifyAnalytics&&ShopifyAnalytics.meta&&ShopifyAnalytics.meta.product&&ShopifyAnalytics.meta.product.variants&&ShopifyAnalytics.meta.product.variants[0]&&ShopifyAnalytics.meta.product.variants[0].sku,e=/[^A-Za-z0-9_]/g;return t&&t.toLowerCase&&(t=t.toLowerCase().replace(e,"-")),t},o=function(){var t=[a()];return t},r=function(){var t=document.querySelector("#Component_1_1");if(t){var e=t.parentNode;if(e&&e.textContent.indexOf("View product size")>-1)return e}},s=!1,c=function(){s||(s=setTimeout(function(){f(),t.validSKUs.indexOf(t.activeSKU)>-1&&(d(t.activeSKU,t.getThumb()),t.setCtaClickHandler()),clearTimeout(s),s=!1},500))},l=!1,u="js-tangiblee-cta",d=function(e,i){if(!l)return u;if(document.querySelector("."+u))return u;var a=document.createElement("div");a.classList.add("tangiblee-wrapper");var o='<button class="js-tangiblee-cta tangiblee-cta"><img src="'+n+'img/icon.svg"/> <span>VIEW PRODUCT SIZE</span></button>';return a.innerHTML=o,window.innerWidth>768?(a.classList.add("tangiblee-wrapper--desktop"),$(".product__reviews-widget").after(a)):(a.classList.add("tangiblee-wrapper--mobile"),$(".product__images").append(a)),window.addEventListener("resize",c),t.setCtaClickHandler(),u},f=function(){window.removeEventListener("resize",c),[].forEach.call(document.querySelectorAll(".tangiblee-wrapper"),function(t){t&&t.parentNode&&t.parentNode.removeChild(t)});var t=r();t&&(t.style.display="none")},g=function(){return 0===$("#AddToCart").length&&$(".btn-bundles-atc.notify-me-btn").length>0},p=function(){g()?tangiblee("setCustomIframeSrcAttributes",[{key:"outOfStock",value:1}]):tangiblee("setCustomIframeSrcAttributes",[{key:"outOfStock",value:0}])},h=function(){var t,e,n;if($("#ProductPrice:visible").length?(t=document.getElementById("ProductPrice"),t=t&&t.cloneNode(!0)):$(".product__meta [data-bundle-price-bundled]").length&&(t=$(".product__meta [data-bundle-price-bundled] [data-bundle-price-discounted]")[0]),t&&t.textContent){for(var i=0;i<t.children.length;i++)t.removeChild(t.children[i]);e=t.textContent.trim().replace(/(\n|\r).*/g,""),n=e.replace("$","").trim()}return n},m=function(){var t,e,n;return $("#ProductPrice:visible").length?t=document.getElementById("ComparePrice"):$(".product__meta [data-bundle-price-bundled]").length&&(t=$(".product__meta [data-bundle-price-bundled] [data-bundle-price-full]")[0]),t&&t.textContent&&(e=t.textContent.trim().replace(/(\n|\r).*/g,""),n=e.replace("$","").trim()),n},v=function(){return p(),"$"},y=function(){$(".bundle-picker-pdp .bundle-size-selector").on("click",function(){tangiblee("activePrice",h()),tangiblee("activeSalePrice",m()),tangiblee("activeCurrency",v())})};tangiblee("domain","beistravel.com"),tangiblee("useCookies",!0),tangiblee("activeATC","#AddToCart, .btn-bundles-atc"),i()&&tangiblee("sideView","right"),f(),e.ready(function(){e.waitForConditionToMet(function(){return!!window.ShopifyAnalytics}).then(function(){f(),tangiblee("activeSKU",a()),tangiblee("activePrice",h()),tangiblee("activeSalePrice",m()),tangiblee("activeCurrency",v()),window.tangibleeAnalytics=window.tangibleeAnalytics||function(){(window.tangibleeAnalytics.q=window.tangibleeAnalytics.q||[]).push(arguments)},window.tangibleeAnalytics("setAnalyticsPlugin","GoogleAnalytics",{trackingId:"UA-149678775-58"}),window.tangibleeAnalytics("setAnalyticsPlugin","GoogleAnalytics",{trackingId:"UA-124886461-1",trackerName:"tng_beis",runExperiment:!0,useCustomerTrackingId:!0,ecommerceTracking:!1,customTangibleeDimension:6,customWidgetDimension:7,customWidgetSessionDimension:8,customTangibleeSessionDimension:9,customTangibleeUserDimension:10}),window.tangibleeAnalytics("setAnalyticsPlugin","InfoPortalAnalytics",{});var t=function(t,e){"1"===e?(l=!0,tangiblee("showCTA",d),y(),window.tangibleeAnalytics("setVariation","Tangiblee ON")):window.tangibleeAnalytics("setVariation","Tangiblee OFF"),tangiblee("activateABTest"),tangiblee("startOnSKUs",o())};window.tangibleeAnalytics("setExperiment",{onExperimentReady:t,optimizeContainerId:"OPT-MSNNG4T",optimizeExperimentId:"96-MdWiwSPiKlzUTTTLo-A"}),tangiblee("validateSKUs",o(),function(){window.dataLayer.push({event:"tng.activate"})})})})}))}();var r=function(){window.tangibleeAnalytics("trackATCClick")},c={startOnSKUs:function(e){var n=function(t){for(var e,n=Object.keys(t),i=n.length,a={};i--;)e=n[i],a[e.toLowerCase()]=t[e];return a},i=function(e){if(e){if("string"==typeof e)t.SKUs.push(e);else if(e.constructor===Array&&e.length>0)for(var i=0;i<e.length;i++)e[i]&&"string"==typeof e[i]&&t.SKUs.indexOf(e[i])===-1&&t.SKUs.push(e[i]);t.SKUs&&0!==t.SKUs.length&&(1===t.SKUs.length&&tangiblee("activeSKU",t.SKUs[0]),t.thumbs={},t.validateSKUs().then(function(e){t.translations=e.translations,t.products=e.products,t.isVisibleProduct=e.hide!==!0,t.thumbs=n(e.cta_urls),t.features=e.features,t.isARAvailable=t.utils.validateFeatureFlag("AR Mode",t.features),t.LockValidation=t.utils.validateFeatureFlag("LockValidation",t.features),t.isViewIn2DContextDisabled=t.utils.validateFeatureFlag("ViewIn2DContextDisabled",t.features),t.QMEnabled=t.utils.validateFeatureFlag("QM Enabled",t.features),t.onSKUsValidated(e.exists,e.products);var i=[];for(var a in e.products)e.exists[a]&&i.push(e.products[a].id);if(i.length){for(var o=0;o<i.length;o++)t.validSKUs.indexOf(i[o])===-1&&t.validSKUs.push(i[o]);if(t.product=t.products[t.activeSKU],i.indexOf(t.activeSKU)>-1){t.iframe.update();var r=function(e){e&&(t.onCTAShown&&t.onCTAShown(),t.setCtaClickHandler(),"onActiveSKUChange"===t.loadIframe&&t.iframe.inject());var n=i.slice().sort(function(e){return e==t.activeSKU?-1:0});window.tangibleeAnalytics("trackImpression",n),window.tangibleeAnalytics("trackFlow","impression"),t.isARAvailable&&window.tangibleeAnalytics("trackCustomEvent",{action:"Client Impression AR",label:t.activeSKU,value:1,isInteraction:!1})};window.tangibleeAnalytics("setProduct",t.product);var s=t.showCTA(t.activeSKU,t.getThumb());s&&s.then?s.then(function(e){t.ctaCssClass=e,r(e)}):s&&s.skipImpression||(t.ctaCssClass=s,r(s)),t.shouldForceWidgetOpen()&&(t.iframe.exists()?t.iframe.update():t.iframe.inject(),t.onCtaClicked({}),t.onForceWidgetOpen(t.isARAvailable),t.modal.show(t.modal.isUsed()))}else t.hideCTA()}else t.hideCTA()})["catch"](function(t){t&&TrackJS.isInstalled()&&TrackJS.track(t.message)}))}};e&&e.then?e.then(function(t){i(t)}):i(e)},domain:function(e){t.domain=e,window.tangibleeAnalytics("setRetailer",e)},useCookies:function(e){return"undefined"==typeof e?t.useCookies:void(t.useCookies=e)},container:function(e){t.container=e},sideView:function(e){t.sideView=e},require:function(e,n){if(e){for(var i=[],a=0;a<e.length;a++)t[e[a]]&&i.push(t[e[a]]);i.length>0&&n.apply(this,i)}},showCTA:function(e){t.showCTA=e},hideCTA:function(e){t.hideCTA=e},setCtaClickHandler:function(){t.setCtaClickHandler()},widgetVersion:function(e){var n=["v3","v2"];n.indexOf(e)>-1&&(t.widgetVersion=e)},activeSKU:function(e){return e&&e.toLowerCase&&(t.activeSKU=e.toLowerCase(),t.updateSku()),t.activeSKU},activeLocale:function(e){t.activeLocale=e,t.iframe.exists()&&t.activeSKU&&t.validSKUs.indexOf(t.activeSKU)>-1&&t.iframe.update()},activePrice:function(e){t.activePrice=e,t.iframe.exists()&&t.activeSKU&&t.validSKUs.indexOf(t.activeSKU)>-1&&t.iframe.update()},activeSalePrice:function(e){t.activeSalePrice=e,t.iframe.exists()&&t.activeSKU&&t.validSKUs.indexOf(t.activeSKU)>-1&&t.iframe.update()},activateMultiVariations:function(){t.useMultiVariations=!0},variationSKUs:function(e){return e?(t.variationSKUs=e,void(t.iframe.exists()&&t.activeSKU&&t.validSKUs.indexOf(t.activeSKU)>-1&&t.iframe.update())):t.variationSKUs},switchWidgetVariation:function(e){var n=e.sku;if(t.validSKUs.indexOf(n)>-1&&t.variationSKUs.indexOf(n)>-1){var i=t.showCTA(n,t.getThumb(n));i&&i.then?i.then(function(e){t.ctaCssClass=e,t.setCtaClickHandler()}):(t.ctaCssClass=i,t.setCtaClickHandler()),t.iframe.switchWidgetVariation(e),window.tangibleeAnalytics("trackImpression",[n]),window.tangibleeAnalytics("trackFlow","impression"),t.isARAvailable&&window.tangibleeAnalytics("trackCustomEvent",{action:"Client Impression AR",label:t.activeSKU,value:1,isInteraction:!1})}else t.hideCTA(n),t.modal.close(t.modal.isUsed())},activeCurrency:function(e){t.activeCurrency=e,t.iframe.exists()&&t.activeSKU&&t.validSKUs.indexOf(t.activeSKU)>-1&&t.iframe.update()},activeATC:function(e){if(t.activeATC=e,"string"==typeof e)for(var n=document.querySelectorAll(e),i=0;i<n.length;i++){var a=n[i];a.removeEventListener("click",r),a.addEventListener("click",r)}},openWidget:function(){t.utils.waitForConditionToMet(function(){return t.activeSKU&&t.validSKUs.indexOf(t.activeSKU)>-1}).then(function(){var e=!1,n="arEnabled";t.customIframeSrcAttributes.forEach(function(t){t.key===n&&(t.value="1",e=!0)}),e||t.customIframeSrcAttributes.push({key:n,value:"1"}),t.iframe.exists()?t.iframe.update():t.iframe.inject(),t.modal.show(t.modal.isUsed())})},onSKUsValidated:function(e){t.onSKUsValidated=e},onCTAShown:function(e){t.onCTAShown=e},onCtaClicked:function(e){t.onCtaClicked=e},onModalOpened:function(e){t.onModalOpened=e},onIframeLoaded:function(e){t.onIframeLoaded=e},onUserInteracted:function(e){t.onUserInteracted=e},onModalClosed:function(e){t.onModalClosed=e},onKeepAlive:function(e){t.onKeepAlive=e},onCameraModeChange:function(e){t.onCameraModeChange=e},onATCClickInWidget:function(e){t.onATCClickInWidget=e},onWidgedRendered:function(e){t.onWidgedRendered=e},onIframeSrcChange:function(e){t.onIframeSrcChange=e},validateSKUs:function(e,n){var i=function(t){for(var e,n=Object.keys(t),i=n.length,a={};i--;)e=n[i],a[e.toLowerCase()]=t[e];return a},a=function(e){if(e){if("string"==typeof e)t.SKUs.push(e);else if(e.constructor===Array&&e.length>0)for(var a=0;a<e.length;a++)e[a]&&"string"==typeof e[a]&&t.SKUs.indexOf(e[a])===-1&&t.SKUs.push(e[a]);t.SKUs&&0!==t.SKUs.length&&(1===t.SKUs.length&&tangiblee("activeSKU",t.SKUs[0]),t.thumbs={},t.validateSKUs().then(function(e){t.translations=e.translations,t.products=e.products,t.isVisibleProduct=e.hide!==!0,t.thumbs=i(e.cta_urls),t.features=e.features,t.isARAvailable=t.utils.validateFeatureFlag("AR Mode",t.features),t.LockValidation=t.utils.validateFeatureFlag("LockValidation",t.features),t.isViewIn2DContextDisabled=t.utils.validateFeatureFlag("ViewIn2DContextDisabled",t.features),t.QMEnabled=t.utils.validateFeatureFlag("QM Enabled",t.features),t.onSKUsValidated(e.exists,e.products);var a=[];for(var o in e.products)e.exists[o]&&a.push(e.products[o].id);a.length?(t.validSKUs=a,t.product=t.products[t.activeSKU],n()):t.hideCTA()})["catch"](function(t){t&&TrackJS.isInstalled()&&TrackJS.track(t.message)}))}};e.then?e.then(function(t){a(t)}):a(e)},activateABTest:function(){var e=t.validSKUs;if(e.length&&e.indexOf(t.activeSKU)>-1){t.iframe.update();var n=function(n){n&&(t.onCTAShown&&t.onCTAShown(),t.setCtaClickHandler(),"onActiveSKUChange"===t.loadIframe&&t.iframe.inject());var i=e.slice().sort(function(e){return e==t.activeSKU?-1:0});window.tangibleeAnalytics("trackImpression",i),window.tangibleeAnalytics("trackFlow","impression"),t.isARAvailable&&window.tangibleeAnalytics("trackCustomEvent",{action:"Client Impression AR",label:t.activeSKU,value:1,isInteraction:!1})};window.tangibleeAnalytics("setProduct",t.product);var i=t.showCTA(t.activeSKU,t.thumbs[t.product.id]);i&&i.then?i.then(function(e){t.ctaCssClass=e,n(e)}):(t.ctaCssClass=i,n(i)),t.shouldForceWidgetOpen()&&(t.iframe.exists()?t.iframe.update():t.iframe.inject(),t.onCtaClicked({}),t.onForceWidgetOpen(t.isARAvailable),t.modal.show(t.modal.isUsed()))}else t.hideCTA()},preventDefaultOnCtaClick:function(e){t.preventDefaultOnCtaClick=e},stopPropagationOnCtaClick:function(e){t.stopPropagationOnCtaClick=e},useClickEventInsteadMousedown:function(e){t.useClickEventInsteadMousedown=e},availableModes:function(e){e&&Array.prototype.isPrototypeOf(e)&&(t.availableModes=e,t.iframe.exists()&&t.activeSKU&&t.validSKUs.indexOf(t.activeSKU)>-1&&t.iframe.update())},categoryThumbsDefault:function(e){t.categoryThumbsDefault=e},setCustomIframeSrcAttributes:function(e){var n=function(t){return t.toString().trim().replace(/[^0-9A-z]/g,"")};e instanceof Array&&e.forEach(function(e){if(e.key){var i=!1;t.customIframeSrcAttributes.forEach(function(t){t.key===n(e.key)&&(t.value=encodeURI(e.value),i=!0)}),i||t.customIframeSrcAttributes.push({key:n(e.key),value:encodeURI(e.value)})}}),t.iframe.exists()&&t.activeSKU&&t.validSKUs.indexOf(t.activeSKU)>-1&&t.iframe.update()},clearIframeSrcAttributes:function(){t.customIframeSrcAttributes=[],t.iframe.exists()&&t.activeSKU&&t.validSKUs.indexOf(t.activeSKU)>-1&&t.iframe.update()},onForceWidgetOpen:function(e){t.onForceWidgetOpen=e},onForceWidgetClose:function(e){t.onForceWidgetClose=e}};if(Math.random()<.005&&TrackJS.install({token:"361b2d56afe74d42bc4f2b449e00b39a",application:"integration-scripts-31",console:{enabled:!1},callback:{enabled:!1},network:{enabled:!1},visitor:{enabled:!1},window:{enabled:!1}}),!window.tangibleeScriptLoaded){window.tangibleeScriptLoaded=!0;var l=window.tangiblee&&window.tangiblee.q||[];window.tangiblee=function(){try{for(var t=arguments[0],e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);return c[t].apply(this,e)}catch(i){i&&TrackJS.isInstalled()&&TrackJS.track(i.message)}};for(var u=!1,d=0;d<l.length;d++)"openWidget"===l[d][0]?u=l[d]:window.tangiblee.apply(this,l[d]);u&&window.tangiblee.apply(this,u),t.version="3.1.1.164",t.timeOfInit=new Date,t.iframe.messaging.startListening()}!function(){var t={config:{variation:"Tangiblee ON",retailer:"www.tangiblee.com",product:{category:"Default",categoryId:-1,label:"Unknown"},parseOn:!1,trackOn:!1,orderParser:!1,useCookies:"function"!=typeof tangiblee||tangiblee("useCookies")!==!1,cookieUserKey:"tangiblee:widget:user",cookieUserFlowKey:"tangiblee_user_flow",cookieCDKey:"tangiblee_cd"},state:{userId:!1,plugins:{},activatedPlugins:[],timeOfInit:new Date,customDimensions:{}},mailBox:{}};t.utils={},t.utils.storage={getCookie:function(t){var e,n,i=t+"=",a=document.cookie.split(";");for(e=0;e<a.length;e++){for(n=a[e];" "===n.charAt(0);)n=n.substring(1);if(0===n.indexOf(i))return n.substring(i.length,n.length)}return""},setCookie:function(t,e,n){var i=new Date;i.setTime(i.getTime()+24*(n||365)*60*60*1e3);var a="expires="+i.toUTCString();document.cookie=t+"="+e+";"+a+";path=/; Secure;"},setLS:function(t,e){var n="object"==typeof e?JSON.stringify(e):e;if(n.length>0)try{return localStorage.setItem(t,n),!0}catch(i){return!1}return!1},getLS:function(t){try{var e=localStorage.getItem(t);return JSON.parse(e)}catch(n){return!1}},removeLS:function(t){try{return localStorage.removeItem(t),!0}catch(e){return!1}}},t.utils.getParam=function(t){var e=function(){for(var t,e,n,i={},a=window.location.search.substring(1).split("&"),o=0;o<a.length;o++)t=a[o],e=t.split("="),n={key:e[0],value:e[1]},n.key&&(i[n.key]=n.value||"");return i},n=e();return!!n[t]&&decodeURI(n[t])},t.utils.pageChecker=function(){var e=function(t){if(!window.location||!window.location.href)return!1;var e,n,i;for(e=0;e<t.length;e++)if(n=t[e],i=!1,i="function"==typeof n?n():"function"==typeof n.test?n.test(window.location.href):window.location.href.toLowerCase().indexOf(n.toString().toLowerCase())>0)return!0;return!1};return{isParseRevenuePage:function(){return!!t.config.parseOn&&e(t.config.parseOn)},isTrackRevenuePage:function(){return!!t.config.trackOn&&e(t.config.trackOn)}}}(),t.utils.transferCookies=function(){var e=t.config.cookieUserKey,n=t.utils.getParam(encodeURIComponent(e));n&&t.utils.storage.setCookie(e,n)},t.utils.http={fetch:function(t,e,n,i,a){try{var o=new XMLHttpRequest;o.open(e,t,!0),o.setRequestHeader("X-Requested-With","XMLHttpRequest"),o.setRequestHeader("Content-Type","application/json"),o.onreadystatechange=function(){o.readyState>3&&o.status>=200&&o.status<400&&i&&i(o.responseText.length&&JSON.parse(o.responseText))},o.onerror=function(){a&&a(o.statusText)},o.send(n)}catch(r){a&&a(r)}}},t.utils.waitForConditionToMet=function(t,e){e=e||500;var n,i=0,a=function(){};return{then:function(o){return function r(){t()?(o(),"undefined"!=typeof n&&clearTimeout(n)):i++>e?(a(),"undefined"!=typeof n&&clearTimeout(n)):n=setTimeout(r,100)}(),{fail:function(t){a=t}}}}},t.utils.ready=function(t){"loading"!=document.readyState?t():document.addEventListener("DOMContentLoaded",t)},t.utils.isItMobileOrTablet=function(){var t=navigator.userAgent;return t.match(/Android/i)||t.match(/BlackBerry/i)||t.match(/iPhone|iPad|iPod/i)||t.match(/Opera Mini/i)||t.match(/IEMobile/i)},t.utils.isItTablet=function(){const t=navigator.userAgent.toLowerCase(),e=/(ipad|tablet|(android(?!.*mobile))|(windows(?!.*phone)(.*touch))|kindle|playbook|silk|(puffin(?!.*(IP|AP|WP))))/.test(t);return e},t.utils.saveCustomDimensions=function(){var e=JSON.stringify(t.state.customDimensions);t.utils.storage.setCookie(t.config.cookieCDKey,e,365)},t.utils.loadCustomDimensions=function(){var e=t.utils.storage.getCookie(t.config.cookieCDKey);e&&(t.state.customDimensions=JSON.parse(e))},function(){var e="AdobeAnalytics";t.state.plugins[e]=function(e,n){var i=!1;e=e||{};var a={tangibleeEVar:!1,tangibleeSessionEVar:!1,widgetEVar:!1,widgetSessionEVar:!1,userIdEVar:!1};for(var o in a)e[o]="undefined"!=typeof e[o]?e[o]:a[o];var r=function(){if(t.mailBox[n])for(var e=0;e<t.mailBox[n].length;e++)t.mailBox[n][e]();i=!0,t.mailBox[n]=[]};return r(),{_unique_id:e._unique_id,isReady:function(){return i},activate:function(){return!0},setExperiment:function(){return!1},trackImpression:function(){s&&(s[e.tangibleeEVar]=t.config.variation,s[e.tangibleeSessionEVar]=t.config.variation,s[e.userIdEVar]=t.state.userId,s.linkTrackVars=[e.tangibleeEVar,e.tangibleeSessionEVar,e.userIdEVar].join(),s.tl(!0,"o","Tangiblee Experience"))},trackWidgetOpen:function(){if(s){var t=(new Date).toISOString().substring(0,10),n="Widget Opened "+t;s[e.widgetEVar]=n,s[e.widgetSessionEVar]=n,s.linkTrackVars=[e.widgetEVar,e.widgetSessionEVar].join(),s.tl(!0,"o","Tangiblee Experience")}},trackWidgetClose:function(){return!1},trackATCClick:function(){return!1},trackATCWidgetClick:function(){return!1},trackOrder:function(t){return!1},trackCustomEvent:function(t){return!1},trackFlow:function(t){return!1}}}}(),function(){var e="AzureAnalytics";t.state.plugins[e]=function(e,n){var i=!1;e=e||{};var a={appKey:"b934bb02-9526-424c-b803-831e89bc8d5c"};for(var o in a)e[o]="undefined"!=typeof e[o]?e[o]:a[o];var r=function(){if(t.mailBox[n])for(var e=0;e<t.mailBox[n].length;e++)t.mailBox[n][e]();i=!0,t.mailBox[n]=[]};r(),!function(t,n,i){var a=t.location,o="script",r="instrumentationKey",s="ingestionendpoint",c="disableExceptionTracking",l="ai.device.",u="toLowerCase",d="crossOrigin",f="POST",g="appInsightsSDK",p=i.name||"appInsights";(i.name||t[g])&&(t[g]=p);var h=t[p]||function(g){function p(t,e){var n={},i="Browser";return n[l+"id"]=i[u](),n[l+"type"]=i,n["ai.operation.name"]=a&&a.pathname||"_unknown_",n["ai.internal.sdkVersion"]="javascript:snippet_"+(w.sv||w.version),{time:function(){function t(t){var e=""+t;return 1===e.length&&(e="0"+e),e}var e=new Date;return e.getUTCFullYear()+"-"+t(1+e.getUTCMonth())+"-"+t(e.getUTCDate())+"T"+t(e.getUTCHours())+":"+t(e.getUTCMinutes())+":"+t(e.getUTCSeconds())+"."+((e.getUTCMilliseconds()/1e3).toFixed(3)+"").slice(2,5)+"Z"}(),iKey:t,name:"Microsoft.ApplicationInsights."+t.replace(/-/g,"")+"."+e,sampleRate:100,tags:n,data:{baseData:{ver:2}}}}function h(n){var o,c,l,d,h,m,v,C,S,x,A;y=!0,w.queue=[],b||(b=!0,o=k,v=function(){var t={},e=g.connectionString;if(e)for(var n=e.split(";"),i=0;i<n.length;i++){var a=n[i].split("=");2===a.length&&(t[a[0][u]()]=a[1])}if(!t[s]){var o=t.endpointsuffix,r=o?t.location:null;t[s]="https://"+(r?r+".":"")+"dc."+(o||"services.visualstudio.com")}return t}(),C=v[r]||g[r]||"",S=v[s],x=S?S+"/v2/track":e.endpointUrl,(A=[]).push((c="SDK LOAD Failure: Failed to load Application Insights SDK script (See stack for details)",l=o,d=x,(m=(h=p(C,"Exception")).data).baseType="ExceptionData",m.baseData.exceptions=[{typeName:"SDKLoadFailed",message:c.replace(/\./g,"-"),hasFullStack:!1,stack:c+"\nSnippet failed to load ["+l+"] -- Telemetry is disabled\nHelp Link: https://go.microsoft.com/fwlink/?linkid=2128109\nHost: "+(a&&a.pathname||"_unknown_")+"\nEndpoint: "+d,parsedStack:[]}],h)),A.push(function(t,e,n,i){var a=p(C,"Message"),o=a.data;o.baseType="MessageData";var r=o.baseData;return r.message='AI (Internal): 99 message:"'+("SDK LOAD Failure: Failed to load Application Insights SDK script (See stack for details) ("+n+")").replace(/\"/g,"")+'"',r.properties={endpoint:i},a}(0,0,o,x)),function(e,n){if(JSON){var a=t.fetch;if(a&&!i.useXhr)a(n,{method:f,body:JSON.stringify(e),mode:"cors"});else if(XMLHttpRequest){var o=new XMLHttpRequest;o.open(f,n),o.setRequestHeader("Content-type","application/json"),o.send(JSON.stringify(e))}}}(A,x))}function m(t,e){b||setTimeout(function(){!e&&w.core||h()},500)}function v(t){for(;t.length;)!function(t){w[t]=function(){var e=arguments;y||w.queue.push(function(){w[t].apply(w,e)})}}(t.pop())}var y=!1,b=!1,w={initialize:!0,queue:[],sv:"4",version:2,config:g},k=g.url||i.src;if(k){var C=function(){var t=n.createElement(o);t.src=k;var e=i[d];return!e&&""!==e||"undefined"==t[d]||(t[d]=e),t.onload=m,t.onerror=h,t.onreadystatechange=function(e,n){"loaded"!==t.readyState&&"complete"!==t.readyState||m(0,n)},t}();i.ld<0?n.getElementsByTagName("head")[0].appendChild(C):setTimeout(function(){n.getElementsByTagName(o)[0].parentNode.appendChild(C)},i.ld||0)}try{w.cookie=n.cookie}catch(S){}var x="track",A="TrackPage",I="TrackEvent";v([x+"Event",x+"PageView",x+"Exception",x+"Trace",x+"DependencyData",x+"Metric",x+"PageViewPerformance","start"+A,"stop"+A,"start"+I,"stop"+I,"addTelemetryInitializer","setAuthenticatedUserContext","clearAuthenticatedUserContext","flush"]),w.SeverityLevel={Verbose:0,Information:1,Warning:2,Error:3,Critical:4};var E=(g.extensionConfig||{}).ApplicationInsightsAnalytics||{};if(!0!==g[c]&&!0!==E[c]){method="onerror",v(["_"+method]);var T=t[method];t[method]=function(t,e,n,i,a){var o=T&&T(t,e,n,i,a);return!0!==o&&w["_"+method]({message:t,url:e,lineNumber:n,columnNumber:i,error:a}),o},g.autoExceptionInstrumented=!0}return w}(i.cfg);(t[p]=h).queue&&0===h.queue.length&&h.trackPageView({})}(window,document,{src:"https://az416426.vo.msecnd.net/scripts/b/ai.2.min.js",name:"tngAppInsights",cfg:{instrumentationKey:e.appKey}});var s=function(t,e){tngAppInsights.trackEvent({name:t})};return{_unique_id:e._unique_id,isReady:function(){return i},activate:function(){return!0},setExperiment:function(){return!1},trackImpression:function(){s("impression")},trackWidgetOpen:function(){s("open widget")},trackWidgetClose:function(){s("close widget")},trackATCClick:function(){s("ATC")},trackATCWidgetClick:function(){s("ATC Widget")},trackOrder:function(t){s("Conversion")},trackCustomEvent:function(t){s(t.action)},trackFlow:function(t){return!1}}}}(),function(){var e="ConvertAnalytics";t.state.plugins[e]=function(e,n){var i=!1;e=e||{};var a={convertPDPImpression:!1,convertWidgetOpenGoal:!1,convertATCGoal:!1,convertATCWidgetGoal:!1,convertConversionGoal:!1,convertRevenueGoal:!1};for(var o in a)e[o]="undefined"!=typeof e[o]?e[o]:a[o];var r=function(){if(t.mailBox[n])for(var e=0;e<t.mailBox[n].length;e++)t.mailBox[n][e]();i=!0,t.mailBox[n]=[]};r();var s=function(t){window._conv_q=window._conv_q||[],window._conv_q.push(["triggerConversion",t])};return{_unique_id:e._unique_id,isReady:function(){return i},activate:function(){return!0},setExperiment:function(){return!1},trackImpression:function(){e.convertPDPImpression&&s(e.convertPDPImpression)},trackWidgetOpen:function(){e.convertWidgetOpenGoal&&s(e.convertWidgetOpenGoal)},trackWidgetClose:function(){return!1},trackATCClick:function(){e.convertATCGoal&&s(e.convertATCGoal)},trackATCWidgetClick:function(){e.convertATCWidgetGoal&&s(e.convertATCWidgetGoal)},trackOrder:function(t){e.convertConversionGoal||s(e.convertConversionGoal),e.convertRevenueGoal&&t&&0!==t.total&&(window._conv_q=window._conv_q||[],t.id=t.id||(new Date).getTime(),window._conv_q.push(["sendRevenue",t.id,t.total,t.items.length,e.convertRevenueGoal]))},trackCustomEvent:function(){return!1},trackFlow:function(t){return!1}}}}(),function(){var e="DataLayerAnalytics";t.state.plugins[e]=function(e,n){var i=!1;e=e||{};var a={isAvailable:!1};for(var o in a)e[o]="undefined"!=typeof e[o]?e[o]:a[o];var r=function(){if(t.mailBox[n])for(var e=0;e<t.mailBox[n].length;e++)t.mailBox[n][e]();i=!0,t.mailBox[n]=[]};return r(),{_unique_id:e._unique_id,isReady:function(){return i},activate:function(){return!0},setExperiment:function(){return!1},trackImpression:function(t){e.isAvailable&&!e.isAvailable()||dataLayer&&dataLayer.push({event:"Tangiblee Impression"})},trackWidgetOpen:function(){if((!e.isAvailable||e.isAvailable())&&dataLayer){var t=(new Date).toISOString().substring(0,10),n="Widget Opened "+t;dataLayer.push({TangibleeOpen:n}),dataLayer.push({event:"Tangiblee Open"})}},trackWidgetClose:function(){return!1},trackATCClick:function(){return!1},trackATCWidgetClick:function(){e.isAvailable&&!e.isAvailable()||dataLayer&&dataLayer.push({event:"Tangiblee ATC"})},trackOrder:function(t){return!1},trackCustomEvent:function(){return!1},trackFlow:function(t){return!1}}}}(),function(){var e="GoogleAnalytics",n="GoogleOptimize";t.state.plugins[e]=function(e,i){var a=!1;e=e||{};var o={trackingId:!1,inPageAnalytics:!1,trackerName:"tangiblee",useCustomerTrackingId:!1,googleAnalyticsObject:!1,ecommerceTracking:!0,enhancedEcommerce:!1,runExperiment:!1,forceGaScriptInjecting:!1,customTangibleeDimension:1,customWidgetDimension:2,customWidgetSessionDimension:3,customTangibleeSessionDimension:4,customTangibleeUserDimension:5,customTangibleeFlowDimension:6,isAvailable:!1,isManualActivation:!1,flowATCDependandStep:4};for(var r in o)e[r]="undefined"!=typeof e[r]?e[r]:o[r];var s="",c=function(t){var e=new Date,n=e.getFullYear(),i=e.getMonth()+1,a=e.getDate(),o=e.getHours(),r=e.getMinutes(),s=e.getSeconds(),c=Math.floor(e.getMilliseconds()/100);return""+t+"-"+n+"-"+i+"-"+a+"T"+o+":"+r+":"+s+":"+c},l=function(){return e.isAvailable&&!e.isAvailable()?function(){}:"function"==typeof e.googleAnalyticsObject?e.googleAnalyticsObject():window[e.googleAnalyticsObject||"ga"]},u=function(t){if(e.forceGaScriptInjecting&&"function"!=typeof e.googleAnalyticsObject&&!l()){window[e.googleAnalyticsObject||"ga"]=function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date;var n=document.createElement("script"),i=document.getElementsByTagName("script")[0];return n.async=1,n.src="https://www.google-analytics.com/analytics.js",n.onload=function(){t()},void i.parentNode.insertBefore(n,i)}if(l())t();else var a=setInterval(function(){l()&&(clearInterval(a),t())},500)},d=function(){if(s=""===e.trackerName?"":e.trackerName+".",!e.inPageAnalytics){var n={name:e.trackerName,cookieDomain:e.useCustomerTrackingId?"auto":document.location.hostname};e.useCustomerTrackingId||(n.cookieName="_ga_tng",n.cookieExpires=63072e3,n.cookieFlags="SameSite=None; Secure",t.state.userId&&(n.clientId=t.state.userId)),l()("create",e.trackingId,n),l()(s+"set","anonymizeIp",!0)}e.ecommerceTracking&&(e.enhancedEcommerce?l()(s+"require","ec"):l()(s+"require","ecommerce"))},f=function(t){l()(s+"require",t.optimizeContainerId);var e=t.customDataLayerObject||window.dataLayer||[],i=function(){e.push(arguments)},a=function(e){t.onExperimentReady(n,e)};i("event","optimize.callback",{name:t.optimizeExperimentId,callback:a})},g=!0,p=function(t,n,i,a,o){!e.useCustomerTrackingId&&g&&(g=!1,l()(s+"send","pageview"));var r=!o;l()(s+"send","event",t,n,i,a,{nonInteraction:r})},h=function(t){for(var e="",n=0;n<t.length;n++){var i=t[n];if(i.slot){var a=i.slot,o=i.dimensionValue;l()(s+"set","dimension"+a,o),e+="dimension"+a+"-"+o+";"}}p("caller.js","Set Custom Dimension",e,1,!1)},m=function(){u(function(){if(d(),t.mailBox[i])for(var e=0;e<t.mailBox[i].length;e++)t.mailBox[i][e]();a=!0,t.mailBox[i]=[]})};return e.isManualActivation||m(),{_unique_id:e._unique_id,activate:function(){m()},isReady:function(){return a},setExperiment:function(t){t.provider===n&&e.runExperiment&&f(t)},trackImpression:function(){h([{slot:e.customTangibleeDimension,dimensionValue:t.config.variation},{slot:e.customTangibleeSessionDimension,dimensionValue:t.config.variation},{slot:e.customTangibleeUserDimension,dimensionValue:t.state.userId}]),p(t.config.product.category+"-"+t.config.product.categoryId,"Client Impression",t.state.userId,1,!1)},trackWidgetOpen:function(){var n=(new Date).toISOString().substring(0,10),i="Widget Opened "+n;h([{slot:e.customWidgetDimension,dimensionValue:i},{slot:e.customWidgetSessionDimension,dimensionValue:i}]),p(t.config.product.category+"-"+t.config.product.categoryId,"Client Open",t.config.product.label,1,!0)},trackWidgetClose:function(){return!1},trackATCClick:function(){p(t.config.product.category+"-"+t.config.product.categoryId,"ATC",t.config.product.label,1,!0)},trackATCWidgetClick:function(){p(t.config.product.category+"-"+t.config.product.categoryId,"ATC Widget",t.config.product.label,1,!0)},trackOrder:function(n){if(!e.inPageAnalytics){p("Order Tracking","Client Conversion",t.state.userId,n&&n.total||1,!1),n.id=n.id||c(t.config.variation);var i,a;if(e.enhancedEcommerce){for(l()(s+"set","currencyCode",n.currency||"USD"),i=0;i<n.items.length;i++)a=n.items[i],l()(s+"ec:addProduct",{id:a.sku||a.name,name:a.name,category:a.category||"",price:a.price,quantity:a.qty});l()(s+"ec:setAction","purchase",{id:n.id,affiliation:t.config.retailer,revenue:n.total})}else{for(l()(s+"ecommerce:addTransaction",{id:n.id,affiliation:t.config.retailer,revenue:n.total,currency:n.currency||"USD"}),i=0;i<n.items.length;i++)a=n.items[i],l()(s+"ecommerce:addItem",{id:n.id,name:a.name,sku:a.sku||a.name,category:a.category||"",price:a.price,quantity:a.qty,currency:n.currency||"USD"});l()(s+"ecommerce:send")}p("Tracking","Order",n.id,Math.round(n.total),!1)}},trackCustomEvent:function(n){var i=e.inPageAnalytics||e.useCustomerTrackingId,a=!n.retailer_additional_dims||n.retailer_additional_dims&&i;if(a&&n.dimensions){for(var o=[],r=0;r<n.dimensions.length;r++)o.push({slot:n.dimensions[r].index,dimensionValue:n.dimensions[r].value});h(o)}p(n.category||t.config.product.category+"-"+t.config.product.categoryId,n.action,n.label,n.value||1,n.isInteraction)},trackFlow:function(n){if(!e.inPageAnalytics&&!e.useCustomerTrackingId){var i=function(t){return("0"+t).slice(-2)},a=function(){var t=new Date,e=i(t.getDate()),n=i(t.getMonth()+1),a=t.getFullYear();return e+n+a},o=function(t){var e={impression:0,open:1,"switch to ar":2,calibrate:3,"start ar":4,"accept terms":5,"allow camera":6,"captured image":7,"selected image":8,atc:9};return e[t]},r=function(){var e=t.utils.storage.getCookie(t.config.cookieUserFlowKey),n=e.split(",");return n},s=function(t){for(var e={},n=0;n<t.length;n++){var i=t[n].split("-");2==i.length&&(e[i[0]]=i[1])}return e},c=function(t){var e="";for(var n in t)e+=n+"-"+t[n]+",";return e=e.substr(0,e.length-1)},l=o(n);if(l!==!1){var u=s(r());if(e.flowATCDependandStep&&9===l&&!u[e.flowATCDependandStep])return;u[l]=a();var d=c(u);h([{slot:e.customTangibleeFlowDimension,dimensionValue:d}]),t.utils.storage.setCookie(t.config.cookieUserFlowKey,d,365)}}}}}}(),function(){var e="InfoPortalAnalytics";t.state.plugins[e]=function(e,n){var i=!1;e=e||{};var a={analyticsUrl:"https://info.tangiblee.com",trackingId:!1,isManualActivation:!1};for(var o in a)e[o]="undefined"!=typeof e[o]?e[o]:a[o];var r=function(){if(t.mailBox[n])for(var e=0;e<t.mailBox[n].length;e++)t.mailBox[n][e]();i=!0,t.mailBox[n]=[]};e.isManualActivation||r();var s=function(n){if(e.trackingId){var i=e.trackingId(),a=[];for(var o in i)a.push(n);n=a.join(";")}var r=t.utils.storage.getCookie("_ga");return r&&/GA\d+\.\d+\.(.+)/gi.test(r)?n+";"+/GA\d+\.\d+\.(.+)/gi.exec(r)[1]:n},c=function(){if(!e.trackingId)return"";var t=e.trackingId(),n=[];for(var i in t)t[i]&&n.push(i);return n.length>0?"&trackingId="+n.join(","):""},l=function(){t.state.registerSessionIntervalId&&clearInterval(t.state.registerSessionIntervalId),
t.state.registerSessionIntervalId=setInterval(function(){var n=e.analyticsUrl+"/api/RegisterSession/"+encodeURIComponent(t.config.product.id)+"?domain="+t.config.retailer+(t.state.userId?"&user="+encodeURIComponent(s(t.state.userId)):"")+c();t.utils.http.fetch(n,"POST")},5e3)},u=function(){t.state.registerSessionIntervalId&&clearInterval(t.state.registerSessionIntervalId)},d=function(){var n=t.state.buttonDisplayedAt-t.state.timeOfInit,i=e.analyticsUrl+"/api/registertimetobutton/"+t.config.product.id+"?domain="+encodeURIComponent(t.config.retailer)+(t.state.userId?"&user="+encodeURIComponent(s(t.state.userId)):"")+"&time="+n+c();t.utils.http.fetch(i,"POST")};return{_unique_id:e._unique_id,isReady:function(){return i},activate:function(){r()},setExperiment:function(){return!1},trackImpression:function(n){t.state.buttonDisplayedAt=new Date;var i=e.analyticsUrl+"/api/regimpr?ids="+n.join()+"&domain="+t.config.retailer+"&platformType=auto"+(t.state.userId?"&user="+encodeURIComponent(s(t.state.userId)):"")+("1"===t.utils.getParam("xtng_fake")?"&fake=suppressimpression":"")+c();t.utils.http.fetch(i,"POST"),d()},trackWidgetOpen:function(){var n=t.state.buttonDisplayedAt?new Date-t.state.buttonDisplayedAt:0;t.state.buttonDisplayedAt=null;var i=e.analyticsUrl+"/api/RegisterOpen/"+encodeURIComponent(t.config.product.id)+"?domain="+t.config.retailer+"&timeToOpen="+n+(t.state.userId?"&user="+encodeURIComponent(s(t.state.userId)):"")+c();t.utils.http.fetch(i,"POST"),t.utils.storage.setLS("tangiblee:widget:opened","true"),l()},trackWidgetClose:function(){u()},trackATCClick:function(){return!1},trackATCWidgetClick:function(){return!1},trackOrder:function(t){return!1},trackCustomEvent:function(){return!1},trackFlow:function(t){return!1}}}}(),function(){var e="InfoPortalAnalyticsV2";t.state.plugins[e]=function(e,n){var i=!1;e=e||{};var a={analyticsUrl:"https://anapi.tangiblee.com",trackingId:!1,isManualActivation:!1,customTangibleeDimension:1,customWidgetDimension:2};for(var o in a)e[o]="undefined"!=typeof e[o]?e[o]:a[o];var r=function(){if(t.utils.loadCustomDimensions(),t.mailBox[n])for(var e=0;e<t.mailBox[n].length;e++)t.mailBox[n][e]();i=!0,t.mailBox[n]=[]};e.isManualActivation||r();var s=function(n){if(e.trackingId){var i=e.trackingId(),a=[];for(var o in i)a.push(n);n=a.join(";")}var r=t.utils.storage.getCookie("_ga");return r&&/GA\d+\.\d+\.(.+)/gi.test(r)?n+";"+/GA\d+\.\d+\.(.+)/gi.exec(r)[1]:n},c=function(){if(!e.trackingId)return"";var t=e.trackingId(),n=[];for(var i in t)t[i]&&n.push(i);return n.length>0?"&trackingId="+n.join(","):""},l=function(){t.state.registerSessionIntervalId&&clearInterval(t.state.registerSessionIntervalId),t.state.registerSessionIntervalId=setInterval(function(){if(t.config.product.id){var n=e.analyticsUrl+"/api/Register/Ping?id="+encodeURIComponent(t.config.product.id)+"&domain="+t.config.retailer+(t.state.userId?"&user="+encodeURIComponent(s(t.state.userId)):"")+c();t.utils.http.fetch(n,"POST")}},5e3)},u=function(){t.state.registerSessionIntervalId&&clearInterval(t.state.registerSessionIntervalId)},d=function(){if(t.config.product.id){var n=t.state.buttonDisplayedAt-t.state.timeOfInit,i=e.analyticsUrl+"/api/Register/TimeToButton?id="+t.config.product.id+"&domain="+encodeURIComponent(t.config.retailer)+(t.state.userId?"&user="+encodeURIComponent(s(t.state.userId)):"")+"&time="+n+c();t.utils.http.fetch(i,"POST")}},f=function(e){for(var n=0;n<e.length;n++){var i=e[n];if(i.slot){var a=i.slot,o=decodeURIComponent(i.dimensionValue);t.state.customDimensions[a]=o}}t.utils.saveCustomDimensions()},g=function(){var e=[],n=[];for(var i in t.state.customDimensions)e.push(i),n.push(t.state.customDimensions[i]);return e.length>0?"&cdi="+e.join()+"&cdv="+n.join():""},p=function(){var e="";return window.screen&&(e+="&sr="+window.screen.width+"x"+window.screen.height),e+="&vp="+window.innerWidth+"x"+window.innerHeight,e+="&ul="+navigator.language||navigator.userLanguage,e+="&de="+document.characterSet,e+="&dc="+(t.utils.isItTablet()?"tablet":t.utils.isItMobileOrTablet()?"mobile":"desktop")};return{_unique_id:e._unique_id,isReady:function(){return i},activate:function(){r()},setExperiment:function(){return!1},trackImpression:function(n){for(var i=[],a=0;a<n.length;a++)n[a]&&i.push(n[a]);if(0!==i.length){t.state.buttonDisplayedAt=new Date,f([{slot:e.customTangibleeDimension,dimensionValue:t.config.variation}]);var o=e.analyticsUrl+"/api/Register/Impression?id="+i.join()+"&domain="+t.config.retailer+(t.state.userId?"&user="+encodeURIComponent(s(t.state.userId)):"")+("1"===t.utils.getParam("xtng_fake")?"&fake=suppressimpression":"")+g()+p()+c();t.utils.http.fetch(o,"POST"),d()}},trackWidgetOpen:function(){if(t.config.product.id){var n=t.state.buttonDisplayedAt?new Date-t.state.buttonDisplayedAt:0;t.state.buttonDisplayedAt=null;var i=(new Date).toISOString().substring(0,10),a="Widget Opened "+i;f([{slot:e.customWidgetDimension,dimensionValue:a}]);var o=e.analyticsUrl+"/api/Register/Open?id="+encodeURIComponent(t.config.product.id)+"&domain="+t.config.retailer+"&timeToOpen="+n+(t.state.userId?"&user="+encodeURIComponent(s(t.state.userId)):"")+g()+p()+c();t.utils.http.fetch(o,"POST"),t.utils.storage.setLS("tangiblee:widget:opened","true"),l()}},trackWidgetClose:function(){u()},trackATCClick:function(){return!1},trackATCWidgetClick:function(){return!1},trackOrder:function(t){return!1},trackCustomEvent:function(){return!1},trackFlow:function(t){return!1}}}}(),function(){var e=function(e){if(!e.id)return!1;var n=t.utils.storage.getLS("latest_tng_orders")||[],i=20;return n.indexOf(e.id)>-1||(n.unshift(e.id),n.slice(0,Math.min(n.length,i)),t.utils.storage.setLS("latest_tng_orders",n),!1)},n=function(e,n){for(var i=0;i<t.state.activatedPlugins.length;i++){var a=function(i){return function(){t.state.activatedPlugins[i][e](n)}}(i);t.state.activatedPlugins[i].isReady()||"activate"===e?a():(t.mailBox[i]||(t.mailBox[i]=[]),t.mailBox[i].push(a))}},i=function(e,i){var a=function(){var t=e();if(!t||!t.items||!t.items.length)return console.error("Wrong order data format, please check Tangiblee Documentation"),!1;t.total=0;for(var n=0;n<t.items.length;n++)t.total+=t.items[n].price*t.items[n].qty;return 0===t.total?(console.warn("Order Total is 0, please check Tangiblee Documentation"),!1):t};if(t.utils.pageChecker.isParseRevenuePage()){var o=a();o&&t.utils.storage.setLS("tng_order",o)}if(t.utils.pageChecker.isTrackRevenuePage()){var o=a();o||(o=t.utils.storage.getLS("tng_order"),i&&(o.id=i()||!1)),o&&(n("trackOrder",o),t.utils.storage.removeLS("tng_order"))}},a={setAnalyticsPlugin:function(e,n){if(n._unique_id)for(var i=0;i<t.state.activatedPlugins.length;i++)if(t.state.activatedPlugins[i]._unique_id===n._unique_id)return;t.state.activatedPlugins.push(t.state.plugins[e](n,t.state.activatedPlugins.length))},setVariation:function(e){t.config.variation=e},getVariation:function(){return t.config.variation},setExperiment:function(t){t.provider||(t.provider="GoogleOptimize"),n("setExperiment",t)},setRetailer:function(e){t.config.retailer=e},setProduct:function(e){t.config.product={id:e.id,category:e.category||"Default",categoryId:e.categoryId||-1,label:(e.id?e.id:"Unknown")+"-"+document.location.href}},setCookieUserKey:function(e){t.config.cookieUserKey=e},setAutoTracking:function(e){t.config.parseOn=e.parseOn,t.config.trackOn=e.trackOn,i(e.parseOrder,e.transactionIdFetcher)},getTangibleeUserId:function(e){var n=500,i=0,a=function(){if(t.state.userId){var a=t.state.userId,o=t.utils.storage.getCookie("_ga");return o&&/GA\d+\.\d+\.(.+)/gi.test(o)&&(a+=";"+/GA\d+\.\d+\.(.+)/gi.exec(o)[1]),e(a),a}n>i&&(setTimeout(waitForUserId,50),i++)};a()},trackOrder:function(t){if(!t||!t.items||!t.items.length)return console.log("Wrong order data format, please check Tangiblee Documentation"),!1;if(t.total=0,e(t))return console.log("Duplicated order was not sent"),!1;for(var i=0;i<t.items.length;i++)t.total+=t.items[i].price*t.items[i].qty;return 0===t.total?(console.warn("Order Total is 0, please check Tangiblee Documentation"),!1):void n("trackOrder",t)},activate:function(){n("activate")},trackImpression:function(t){n("trackImpression",t)},trackATCClick:function(){n("trackATCClick")},trackATCWidgetClick:function(){n("trackATCWidgetClick")},trackWidgetOpen:function(){n("trackWidgetOpen")},trackWidgetClose:function(){n("trackWidgetClose")},trackCustomEvent:function(t){n("trackCustomEvent",t)},trackFlow:function(t){n("trackFlow",t)}},o=function(e){if(t.config.useCookies){var n="https://info.tangiblee.com",i=function(n){t.state.userId=n,t.utils.storage.setLS("tangiblee:widget:user",n),e(),t.utils.storage.setCookie(t.config.cookieUserKey,n,365)},a=function(){var n=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0,n="x"==t?e:3&e|8;return n.toString(16)})};t.state.userId=n(),t.utils.storage.setLS("tangiblee:widget:user",t.state.userId),e(),t.utils.storage.setCookie(t.config.cookieUserKey,t.state.userId,365)},o=t.utils.storage.getLS("tangiblee:widget:user"),r=t.utils.storage.getCookie(t.config.cookieUserKey);t.state.userId=o,r&&r!==t.state.userId&&(t.state.userId=r);var s=window.crypto||window.msCrypto;if(t.state.userId)t.utils.storage.setLS("tangiblee:widget:user",t.state.userId),e(),t.utils.storage.setCookie(t.config.cookieUserKey,t.state.userId,365);else if("undefined"!=typeof s&&s.getRandomValues){var c=function(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,function(t){return(t^s.getRandomValues(new Uint8Array(1))[0]&15>>t/4).toString(16)})};t.state.userId=c(),t.utils.storage.setLS("tangiblee:widget:user",t.state.userId),e(),t.utils.storage.setCookie(t.config.cookieUserKey,t.state.userId,365)}else t.utils.http.fetch(n+"/api/GetUser","GET",!1,i,a)}},r=function(){if(t.utils.transferCookies(),!window.taScriptLoaded){window.taScriptLoaded=!0;var e=window.tangibleeAnalytics&&window.tangibleeAnalytics.q||[];window.tangibleeAnalytics=function(){try{for(var t=arguments[0],e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);return a[t].apply(this,e)}catch(i){}},window.tangibleeAnalytics.loaded=!0;for(var n=0;n<e.length;n++)window.tangibleeAnalytics.apply(this,e[n])}};o(r)}()}()}catch(f){window.TrackJS&&window.TrackJS.isInstalled()&&window.TrackJS.track(f.message)}}();